# Stankoff Portal

## Назначение

**Stankoff Portal** — корпоративная система управления цифровыми рабочими местами для отделов и подразделений компании. Система позволяет организовать работу с заявками через интерактивную канбан-доску с real-time синхронизацией между пользователями.

Типичные применения:
- Техническая поддержка
- Обработка рекламаций
- Управление задачами отдела
- Трекинг обращений клиентов

---

## Основной функционал

### Управление рабочими местами (Workspaces)

Рабочее место — это изолированное пространство со своей структурой данных и участниками.

- **Конструктор структуры** — drag-n-drop редактор для настройки полей заявок
- **Типы полей**: текст, число, дата, выпадающий список, статус, пользователь, файл, связь с другими заявками
- **Секции** — логическая группировка полей (например, "Информация о клиенте", "Детали проблемы")
- **Префикс** — автоматическая нумерация заявок (TP-001, REK-142 и т.д.)
- **Импорт/Экспорт** — JSON и CSV форматы для миграции данных

### Канбан-доска

- **Динамические колонки** — генерируются из вариантов поля статуса
- **Drag-n-drop** — перетаскивание карточек между колонками
- **Фильтрация** — по любым полям заявки
- **Глобальный поиск** — Cmd+K для поиска по всем заявкам
- **Real-time обновления** — изменения видны всем пользователям мгновенно

### Работа с заявками (Entities)

- **Создание** с заполнением кастомных полей
- **Детальный просмотр** в боковой панели
- **Редактирование**: статус, приоритет, исполнитель, любые поля
- **Связи** — объединение заявок из разных рабочих мест
- **История активности** — все действия с заявкой

### Комментарии и коммуникация

- **Rich text редактор** — форматирование текста (Tiptap)
- **@Mentions** — упоминание пользователей с уведомлением
- **Вложения** — загрузка файлов (изображения, документы, видео)
- **Превью** — встроенный просмотр изображений, видео, PDF

### Автоматизация

Система правил для автоматического выполнения действий:

**Триггеры:**
- Создание заявки
- Изменение статуса
- Изменение поля
- Назначение исполнителя
- Новый комментарий
- По расписанию (cron)

**Действия:**
- Установить статус/приоритет
- Назначить исполнителя
- Изменить значение поля
- Отправить уведомление/email

### Аналитика

- **Дашборд** с графиками и статистикой
- Распределение по статусам
- Статистика по исполнителям
- Фильтрация по периоду

### Уведомления

- **In-app** — toast-уведомления и панель истории
- **Email** — при назначении, изменении статуса, @mention
- **Browser Push** — когда вкладка неактивна

---

## Роли и права доступа

### Глобальные роли

| Роль | Описание |
|------|----------|
| Admin | Полный доступ ко всему порталу |
| Manager | Управление заявками, назначение исполнителей |
| Employee | Создание заявок и комментариев |

### Роли в рабочем месте

| Роль | Описание |
|------|----------|
| Admin | Настройка рабочего места, управление участниками |
| Editor | Создание и редактирование заявок |
| Viewer | Только просмотр |

---

## Интеграции

- **Keycloak SSO** — корпоративная аутентификация через OIDC
- **S3-хранилище** — Yandex Object Storage для файлов
- **WebSocket** — real-time синхронизация через Socket.IO

---

## Технический стек

| Компонент | Технологии |
|-----------|------------|
| Frontend | Next.js 16, React 19, TypeScript, Tailwind CSS, Zustand, @dnd-kit |
| Backend | NestJS 11, TypeORM, PostgreSQL, Socket.IO |
| Инфраструктура | Docker Swarm, Nginx, GitHub Actions CI/CD |
