# =============================================
# Zeebe Broker - Development Configuration
# =============================================
# Запуск: docker compose -f docker-compose.camunda.yml up -d
#
# Это минимальная конфигурация для тестирования BPMN:
#   - Только Zeebe broker (без Operate/Tasklist)
#   - Не требует Elasticsearch
#   - Легковесный и быстрый запуск
#
# Порты:
#   - 26500: Zeebe gRPC (для подключения backend)
#   - 9600: Zeebe REST/Actuator (healthcheck)
#
# Для полной платформы с UI используйте camunda-8.8/docker-compose.yaml

services:
  zeebe:
    image: camunda/zeebe:8.7.21
    container_name: stankoff-zeebe
    ports:
      - "26500:26500"  # gRPC Gateway
      - "9600:9600"    # Metrics/REST
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "curl -sf http://127.0.0.1:9600/actuator/health/status || exit 1"]
      interval: 10s
      retries: 30
      start_period: 30s
      timeout: 5s
    environment:
      - ZEEBE_BROKER_GATEWAY_ENABLE=true
      - ZEEBE_BROKER_NETWORK_HOST=0.0.0.0
      - ZEEBE_LOG_LEVEL=info
      - JAVA_OPTS=-Xms256m -Xmx256m
    volumes:
      - zeebe_data:/usr/local/zeebe/data
    networks:
      - stankoff-network

volumes:
  zeebe_data:
    driver: local

networks:
  stankoff-network:
    name: stankoff-portal_stankoff-network
    external: true
