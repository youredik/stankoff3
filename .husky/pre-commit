#!/bin/sh

echo "üîç –ó–∞–ø—É—Å–∫ pre-commit –ø—Ä–æ–≤–µ—Ä–æ–∫..."

# TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è backend
echo "üìù TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ backend..."
cd apps/backend && npm run build --noEmit 2>/dev/null || {
  echo "‚ùå TypeScript –æ—à–∏–±–∫–∏ –≤ backend. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º."
  exit 1
}
cd ../..

# TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è frontend
echo "üìù TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞ frontend..."
cd apps/frontend && npm run build --noEmit 2>/dev/null || {
  echo "‚ùå TypeScript –æ—à–∏–±–∫–∏ –≤ frontend. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º."
  exit 1
}
cd ../..

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ backend
echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ backend..."
cd apps/backend && npm test 2>/dev/null || {
  echo "‚ùå –¢–µ—Å—Ç—ã backend –Ω–µ –ø—Ä–æ—à–ª–∏. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º."
  exit 1
}
cd ../..

echo "‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã!"
