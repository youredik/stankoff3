# =============================================
# Stankoff Portal - Environment Configuration
# =============================================
# Скопируйте в .env и настройте значения

# ===========================================
# DATABASE
# ===========================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=stankoff_portal
DATABASE_USER=stankoff_admin
DATABASE_PASSWORD=change-me-strong-password

# ===========================================
# BACKEND
# ===========================================
BACKEND_PORT=3001
NODE_ENV=development
FRONTEND_URL=http://localhost:3000

# Seed данные (ТОЛЬКО для development!)
# ENABLE_SEED=true — разрешает заполнение БД тестовыми данными при старте
# На preprod/production должно быть ОТКЛЮЧЕНО (по умолчанию отключено)
ENABLE_SEED=true

# JWT секреты (обязательно сгенерируйте уникальные!)
# openssl rand -hex 32
JWT_SECRET=change-me-generate-with-openssl-rand-hex-32
JWT_REFRESH_SECRET=change-me-generate-with-openssl-rand-hex-32
JWT_EXPIRES_IN=15m

# ===========================================
# FRONTEND
# ===========================================
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_WS_URL=ws://localhost:3001

# ===========================================
# S3 / YANDEX OBJECT STORAGE
# ===========================================
S3_ENDPOINT=https://storage.yandexcloud.net
S3_REGION=ru-central1
S3_BUCKET=your-bucket-name
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key

# Алиасы для совместимости
S3_ACCESS_KEY_ID=${S3_ACCESS_KEY}
S3_SECRET_ACCESS_KEY=${S3_SECRET_KEY}
S3_BUCKET_NAME=${S3_BUCKET}

# ===========================================
# EMAIL (SMTP)
# ===========================================
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@stankoff.ru
SMTP_FROM_EMAIL=${SMTP_FROM}
SMTP_FROM_NAME=Stankoff Portal

# ===========================================
# AUTHENTICATION (Keycloak SSO)
# ===========================================
AUTH_PROVIDER=keycloak
AUTH_DEV_MODE=false              # true = dev login без Keycloak (только для разработки!)
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=stankoff
KEYCLOAK_CLIENT_ID=stankoff-portal
KEYCLOAK_CLIENT_SECRET=your-client-secret

# ===========================================
# CAMUNDA / ZEEBE (BPMN)
# ===========================================
# Для локальной разработки: docker compose -f docker-compose.camunda.yml up -d
ZEEBE_ADDRESS=localhost:26500
ZEEBE_CLIENT_ID=
ZEEBE_CLIENT_SECRET=
# Для Camunda Cloud (SaaS):
# ZEEBE_ADDRESS=xxx.zeebe.camunda.io:443
# ZEEBE_CLIENT_ID=your-client-id
# ZEEBE_CLIENT_SECRET=your-client-secret

# ===========================================
# AI PROVIDERS
# ===========================================
# Приоритет провайдеров (через запятую)
# На preprod: yandex (основной), openai (fallback)
AI_LLM_PRIORITY=yandex,openai
AI_EMBEDDING_PRIORITY=yandex,openai
AI_EMBEDDING_DIMENSION=256

# --- Yandex Cloud (YandexGPT Pro, основной LLM) ---
# Без гео-блокировки, нативный русский, 0 ГБ RAM
# Документация: https://yandex.cloud/ru/docs/foundation-models/
# Модели: yandexgpt/latest (Pro), yandexgpt-lite/latest (Lite, дешевле)
YANDEX_CLOUD_API_KEY=
YANDEX_CLOUD_FOLDER_ID=
YANDEX_CLOUD_MODEL=yandexgpt/latest

# --- OpenAI (облако, платно) ---
# Используется как fallback если остальные недоступны
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_EMBEDDING_MODEL=text-embedding-3-large

# ===========================================
# LEGACY DATABASE (MariaDB/MySQL - Read-Only)
# ===========================================
# Подключение к legacy CRM для доступа к клиентам, товарам, сделкам
# ВАЖНО: Создайте пользователя только с SELECT правами!
LEGACY_DB_HOST=
LEGACY_DB_PORT=3306
LEGACY_DB_USER=stankoff_portal_readonly
LEGACY_DB_PASSWORD=
LEGACY_DB_NAME=stankoff

# ===========================================
# BACKUP (Production)
# ===========================================
S3_BACKUP_PREFIX=backups/postgres
BACKUP_RETENTION_DAYS=7

# ===========================================
# SSL / DOMAIN (Production)
# ===========================================
DOMAIN=bpms.stankoff.ru
CERTBOT_EMAIL=admin@stankoff.ru

# =============================================
# PRODUCTION SETTINGS
# =============================================
# Для production раскомментируйте:

# NODE_ENV=production
# FRONTEND_URL=https://bpms.stankoff.ru
# NEXT_PUBLIC_API_URL=https://bpms.stankoff.ru/api
# NEXT_PUBLIC_WS_URL=wss://bpms.stankoff.ru
