# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Stankoff Portal

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

Stankoff Portal - —ç—Ç–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤—ã–º–∏ —Ä–∞–±–æ—á–∏–º–∏ –º–µ—Å—Ç–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Ç–¥–µ–ª–æ–≤ (—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞, —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ –∏ —Ç.–¥.) —Å –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É–µ–º—ã–º–∏ –ø–æ–ª—è–º–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           FRONTEND                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   Next.js   ‚îÇ  ‚îÇ   Zustand   ‚îÇ  ‚îÇ   Tiptap    ‚îÇ  ‚îÇ  Socket.IO  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  App Router ‚îÇ  ‚îÇ   Stores    ‚îÇ  ‚îÇ   Editor    ‚îÇ  ‚îÇ   Client    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         ‚îÇ                ‚îÇ                ‚îÇ                ‚îÇ         ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ                                   ‚îÇ                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    ‚îÇ
                         HTTP/REST  ‚îÇ  WebSocket
                                    ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           BACKEND ‚îÇ                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   NestJS    ‚îÇ  ‚îÇ   TypeORM   ‚îÇ‚îÇ‚îÇ  Socket.IO  ‚îÇ  ‚îÇ  AWS SDK    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Controllers ‚îÇ  ‚îÇ   Entities  ‚îÇ‚îÇ‚îÇ   Gateway   ‚îÇ  ‚îÇ  S3 Client  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ         ‚îÇ                ‚îÇ        ‚îÇ       ‚îÇ                ‚îÇ          ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                   ‚îÇ                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    ‚îÇ
                                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         INFRASTRUCTURE                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ      PostgreSQL 18.1        ‚îÇ  ‚îÇ     Yandex Object Storage   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  (Docker Compose)           ‚îÇ  ‚îÇ     (S3-compatible)         ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

### Frontend (Next.js 16)

#### –°—Ç—Ä–∞–Ω–∏—Ü—ã (App Router)
- `/` - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /dashboard
- `/login` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- `/dashboard` - –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–∑–∞—â–∏—â—ë–Ω–Ω–∞—è, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Header)
- `/workspace/[id]/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞ (Workspace Builder)
- `/workspace/[id]/processes` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —ç–∫–∑–µ–º–ø–ª—è—Ä—ã, —Ä–µ–¥–∞–∫—Ç–æ—Ä BPMN)
- `/admin/users` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ admin)

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**Auth**
- `AuthProvider.tsx` - –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**Admin**
- `UserList.tsx` - –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–∏—Å–∫–æ–º, CRUD –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- `UserModal.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Kanban**
- `KanbanBoard.tsx` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å DndContext, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- `KanbanColumn.tsx` - Droppable –∫–æ–ª–æ–Ω–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–∑ workspace)
- `KanbanCard.tsx` - Draggable –∫–∞—Ä—Ç–æ—á–∫–∞ —Å—É—â–Ω–æ—Å—Ç–∏ (–æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è viewer)
- `EntityDetailPanel.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—É—â–Ω–æ—Å—Ç–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, –≤–ª–æ–∂–µ–Ω–∏—è–º–∏, –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–æ–ª—è–º–∏, ML-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏ tooltips –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
- `CreateEntityModal.tsx` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã workspace
- `FilterPanel.tsx` - –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º

> **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è:** –ü–æ–ª—è, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ workspace (sections ‚Üí fields), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—É—â–Ω–æ—Å—Ç–∏. –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è (status, title, assignee, priority) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ. –ó–Ω–∞—á–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `entity.data` (JSONB).

**Entity**
- `CommentEditor.tsx` - Rich text —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å Tiptap, @mentions –∏ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
- `LinkedEntities.tsx` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑—è–º–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- `ActivityPanel.tsx` - –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)

**Workspace**
- `WorkspaceBuilder.tsx` - Drag & Drop –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –∏–∫–æ–Ω–∫–∏, —Å–µ–∫—Ü–∏–π –∏ –ø–æ–ª–µ–π)
- `WorkspaceMembers.tsx` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ workspace —Å —Ä–æ–ª—è–º–∏
- `AutomationRules.tsx` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (—Ç—Ä–∏–≥–≥–µ—Ä—ã, —É—Å–ª–æ–≤–∏—è, –¥–µ–π—Å—Ç–≤–∏—è)
- `FieldPalette.tsx` - –ü–∞–ª–∏—Ç—Ä–∞ —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π
- `FieldEditor.tsx` - –†–µ–¥–∞–∫—Ç–æ—Ä —Å–≤–æ–π—Å—Ç–≤ –ø–æ–ª–µ–π
- `SectionCard.tsx` - –°–µ–∫—Ü–∏—è —Å –ø–æ–ª—è–º–∏

**Section (–†–∞–∑–¥–µ–ª—ã)**
- `SectionMembersModal.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —Ä–∞–∑–¥–µ–ª–∞ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π viewer/admin)

**Layout**
- `Header.tsx` - –®–∞–ø–∫–∞ —Å –ø–æ–∏—Å–∫–æ–º, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –≤–∏–¥–∞ (–ö–∞–Ω–±–∞–Ω/–ê–Ω–∞–ª–∏—Ç–∏–∫–∞) –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- `Sidebar.tsx` - –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏ (—Å–µ–∫—Ü–∏—è–º–∏), –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π workspaces –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–µ–∫—Ü–∏—è–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, —É—á–∞—Å—Ç–Ω–∏–∫–∏) –∏ –≤—ã–ø–∞–¥–∞—é—â–∏–º –º–µ–Ω—é –¥–ª—è workspace (–¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å, —ç–∫—Å–ø–æ—Ä—Ç, –∏–º–ø–æ—Ä—Ç)
- `NotificationPanel.tsx` - –í—ã–ø–∞–¥–∞—é—â–∞—è –ø–∞–Ω–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –∏–∫–æ–Ω–∫–∞–º–∏ —Ç–∏–ø–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `GlobalSearch.tsx` - –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∑–∞—è–≤–∫–∞–º (Cmd+K)

**Analytics**
- `AnalyticsDashboard.tsx` - –î–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –ø–æ –∑–∞—è–≤–∫–∞–º (–æ–±—â–∏–π –≤–∏–¥ –∏ –ø–æ workspace)

**UI**
- `ToastContainer.tsx` - Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- `MediaLightbox.tsx` - –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π, –∑—É–º–æ–º –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º
- `VideoPlayer.tsx` - –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º (–ø–∞—É–∑–∞, –∑–≤—É–∫, –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º)
- `PdfViewer.tsx` - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä PDF —á–µ—Ä–µ–∑ iframe
- `AttachmentPreview.tsx` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–≤—å—é –≤–ª–æ–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≤–∏–¥–µ–æ, PDF –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤
- `Skeleton.tsx` - Skeleton loaders –¥–ª—è loading states (SkeletonCard, SkeletonColumn, SkeletonSearchResult)
- `ThemeToggle.tsx` - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è/—Å–∏—Å—Ç–µ–º–Ω–∞—è)
- `Breadcrumbs.tsx` - –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏

**BPMN (–ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã)**
- `BpmnModeler.tsx` - –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º (bpmn-js Modeler, dynamic import SSR=false)
- `BpmnViewer.tsx` - –ü—Ä–æ—Å–º–æ—Ç—Ä BPMN –¥–∏–∞–≥—Ä–∞–º–º –±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (bpmn-js NavigatedViewer)
- `BpmnHeatMap.tsx` - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ (—Ü–≤–µ—Ç–æ–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã –∞–∫—Ç–∏–≤–Ω—ã—Ö/–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö/–æ—à–∏–±–æ—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- `ProcessEditor.tsx` - –ü–æ–ª–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ (BpmnModeler + —Ñ–æ—Ä–º–∞ –Ω–∞–∑–≤–∞–Ω–∏—è/–æ–ø–∏—Å–∞–Ω–∏—è + –¥–µ–π—Å—Ç–≤–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–¥–µ–ø–ª–æ—è)
- `ProcessList.tsx` - –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ workspace —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è
- `ProcessInstanceList.tsx` - –°–ø–∏—Å–æ–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö/–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö) —Å —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏
- `ProcessStatisticsCard.tsx` - –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–∞–∫—Ç–∏–≤–Ω—ã–µ/–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ/–æ—à–∏–±–∫–∏/—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è)
- `ProcessDetailView.tsx` - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (BpmnHeatMap + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- `StartProcessModal.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Å—É—â–Ω–æ—Å—Ç–∏
- `TemplateSelector.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–ø—É—Å—Ç–æ–π –∏–ª–∏ –∏–∑ –ø—Ä–µ–¥–∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤)
- `ProcessMiningDashboard.tsx` - –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ Process Mining (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ workspace, —Ç–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –æ–±—ä—ë–º—É/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º, –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞)

**BPMN Tasks (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–¥–∞—á–∏)**
- `tasks/TaskInbox.tsx` - Inbox –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (–º–æ–∏/–¥–æ—Å—Ç—É–ø–Ω—ã–µ/–≤—Å–µ) –∏ –ø–æ–∏—Å–∫–æ–º
- `tasks/TaskCard.tsx` - –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏ –≤ —Å–ø–∏—Å–∫–µ (—Å—Ç–∞—Ç—É—Å, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Å—Ä–æ–∫, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)
- `tasks/TaskDetail.tsx` - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á–∏ —Å —Ñ–æ—Ä–º–æ–π, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π
- `tasks/TaskActions.tsx` - –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (–≤–∑—è—Ç—å/–æ—Ç–∫–∞–∑–∞—Ç—å—Å—è/–∑–∞–≤–µ—Ä—à–∏—Ç—å/–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å)

**BPMN Forms (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—ã)**
- `forms/DynamicForm.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ JSON Schema —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π (text, number, boolean, select, date, textarea)
- `forms/FormViewer.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º User Tasks –Ω–∞ –æ—Å–Ω–æ–≤–µ @bpmn-io/form-js (dynamic import, SSR=false)
- `forms/FormEditor.tsx` - –í–∏–∑—É–∞–ª—å–Ω—ã–π drag-and-drop —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ñ–æ—Ä–º (@bpmn-io/form-js-editor) —Å undo/redo, import/export, preview

**BPMN Triggers (–¢—Ä–∏–≥–≥–µ—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)**
- `triggers/TriggersList.tsx` - –°–ø–∏—Å–æ–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ workspace —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º (–≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å)
- `triggers/TriggerForm.tsx` - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —É—Å–ª–æ–≤–∏–π

**BPMN Entity Links (–°–≤—è–∑–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π)**
- `entity-links/EntityLinksList.tsx` - –°–ø–∏—Å–æ–∫ —Å–≤—è–∑–µ–π —Å—É—â–Ω–æ—Å—Ç–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ç–∏–ø—É —Å–≤—è–∑–∏
- `entity-links/AddLinkModal.tsx` - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–∏ —Å –ø–æ–∏—Å–∫–æ–º —Å—É—â–Ω–æ—Å—Ç–µ–π

**SLA (Service Level Agreement)**
- `sla/SlaStatusBadge.tsx` - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –±–µ–π–¥–∂ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º SLA (–≤—Ä–µ–º—è –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞, —Ü–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è pending/met/breached)
- `sla/SlaDashboard.tsx` - –î–∞—à–±–æ—Ä–¥ SLA –¥–ª—è workspace (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –≤—Å–µ–≥–æ/–≤—ã–ø–æ–ª–Ω–µ–Ω–æ/–Ω–∞—Ä—É—à–µ–Ω–æ/–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ/–ø–æ–¥ —É–≥—Ä–æ–∑–æ–π)
- `sla/SlaDefinitionForm.tsx` - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è SLA (–≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞/—Ä–µ—à–µ–Ω–∏—è, —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã, —É—Å–ª–æ–≤–∏—è, —ç—Å–∫–∞–ª–∞—Ü–∏—è)
- `sla/SlaSettings.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ SLA –≤ workspace (—Å–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π + –¥–∞—à–±–æ—Ä–¥)
- `sla/SlaTimer.tsx` - Real-time —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ SLA —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏, —Ü–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø–æ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ (–∫—Ä–∞—Å–Ω—ã–π <15–º–∏–Ω, –∂—ë–ª—Ç—ã–π <60–º–∏–Ω)

**DMN (Decision Tables)**
- `dmn/DecisionTableEditor.tsx` - –†–µ–¥–∞–∫—Ç–æ—Ä —Ç–∞–±–ª–∏—Ü —Ä–µ—à–µ–Ω–∏–π (–≤—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏, –ø—Ä–∞–≤–∏–ª–∞ —Å —É—Å–ª–æ–≤–∏—è–º–∏, hit policies)
- `dmn/DecisionTableViewer.tsx` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã —Ä–µ—à–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `dmn/DmnSettings.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ DMN –≤ workspace (—Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü —Å CRUD)

> **Dynamic Imports:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å bpmn-js –∏—Å–ø–æ–ª—å–∑—É—é—Ç `dynamic(() => import(...), { ssr: false })`, —Ç–∞–∫ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö API (DOM, Canvas).

#### Stores (Zustand)

**useEntityStore**
```typescript
interface EntityStore {
  entities: Entity[];           // –í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏
  selectedEntity: Entity | null; // –í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å
  comments: Comment[];          // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
  users: User[];                // –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  loading: boolean;
  error: string | null;

  fetchEntities(workspaceId: string): Promise<void>;
  fetchUsers(): Promise<void>;
  selectEntity(id: string): Promise<void>;
  deselectEntity(): void;
  updateStatus(id: string, status: string): Promise<void>;
  updateAssignee(id: string, assigneeId: string | null): Promise<void>;
  updateLinkedEntities(id: string, linkedEntityIds: string[]): Promise<void>;
  updateEntityData(id: string, fieldId: string, value: any): Promise<void>; // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è
  addComment(entityId: string, content: string, attachments?: UploadedAttachment[]): Promise<void>;
  createEntity(data: CreateEntityData): Promise<void>;  // data –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è
}
```

**useWorkspaceStore**
```typescript
interface WorkspaceStore {
  workspaces: Workspace[];
  currentWorkspace: Workspace | null;
  currentRole: WorkspaceRole | null;         // –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–µ–∫—É—â–µ–º workspace
  workspaceRoles: Record<string, WorkspaceRole>; // –†–æ–ª–∏ –≤–æ –≤—Å–µ—Ö workspaces
  loading: boolean;

  fetchWorkspaces(): Promise<void>;
  fetchWorkspace(id: string): Promise<void>;
  fetchMyRole(workspaceId: string): Promise<void>;
  fetchMyRoles(): Promise<void>;              // –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª–∏ –≤–æ –≤—Å–µ—Ö workspaces
  createWorkspace(data: Partial<Workspace>): Promise<Workspace>;
  updateWorkspace(id: string, data: Partial<Workspace>): Promise<void>;
  duplicateWorkspace(id: string, name?: string): Promise<Workspace>;
  archiveWorkspace(id: string, isArchived: boolean): Promise<void>;

  // Permission helpers
  canEdit(): boolean;                         // viewer –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
  canDelete(): boolean;                       // —Ç–æ–ª—å–∫–æ admin –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å
  getRoleForWorkspace(workspaceId: string): WorkspaceRole | null;

  // Workspace Builder mutations
  addSection(name: string): void;
  updateSection(sectionId: string, name: string): void;
  removeSection(sectionId: string): void;
  reorderSections(fromIndex: number, toIndex: number): void;
  addField(sectionId: string, field: Field): void;
  updateField(sectionId: string, fieldId: string, data: Partial<Field>): void;
  removeField(sectionId: string, fieldId: string): void;
  moveField(fromSectionId: string, toSectionId: string, fromIndex: number, toIndex: number): void;
  saveWorkspace(): Promise<void>;
}
```

**useNotificationStore**
```typescript
type NotificationType = 'entity' | 'comment' | 'status' | 'assignment' | 'mention' | 'workspace' | 'sla_warning' | 'sla_breach';

interface AppNotification {
  id: string;
  text: string;
  time: Date;
  read: boolean;
  type?: NotificationType;
  entityId?: string;
  workspaceId?: string;
  urgent?: boolean;  // –î–ª—è SLA breach —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
}

interface NotificationStore {
  notifications: AppNotification[];
  browserNotificationsEnabled: boolean;
  setBrowserNotificationsEnabled(enabled: boolean): void;
  addNotification(data: { text: string; type?: NotificationType; entityId?: string }): void;
  markAllRead(): void;
  markRead(id: string): void;
}
```

> **Browser Push Notifications:** Store –∏—Å–ø–æ–ª—å–∑—É–µ—Ç persist middleware –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ü—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Browser Notification API –∫–æ–≥–¥–∞ –≤–∫–ª–∞–¥–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞.

**useAuthStore**
```typescript
interface AuthState {
  user: User | null;
  accessToken: string | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  error: string | null;
}

interface AuthActions {
  login(email: string, password: string): Promise<void>;
  logout(): Promise<void>;
  refreshTokens(): Promise<boolean>;
  checkAuth(): Promise<void>;
}
```

**useThemeStore**
```typescript
type Theme = 'light' | 'dark' | 'system';

interface ThemeStore {
  theme: Theme;
  setTheme: (theme: Theme) => void;
}
```

> –ò—Å–ø–æ–ª—å–∑—É–µ—Ç persist middleware –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage. –¢–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ CSS –∫–ª–∞—Å—Å `dark` –Ω–∞ `<html>`. –°–∫—Ä–∏–ø—Ç –≤ layout.tsx –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç flash –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

**useSidebarStore**
```typescript
interface SidebarStore {
  isOpen: boolean;
  toggle: () => void;
  open: () => void;
  close: () => void;
}
```

> –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –º–æ–±–∏–ª—å–Ω–æ–≥–æ sidebar. –ù–∞ desktop sidebar –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º, –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ burger menu.

**useSectionStore**
```typescript
interface SectionStore {
  sections: MenuSection[];          // –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
  myRoles: Record<string, MenuSectionRole>; // –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö
  collapsedSections: Set<string>;   // –°–≤—ë—Ä–Ω—É—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã (–≤ localStorage)
  loading: boolean;
  error: string | null;

  fetchSections(): Promise<void>;
  fetchMyRoles(): Promise<void>;
  createSection(data: CreateSectionData): Promise<MenuSection>;
  updateSection(id: string, data: UpdateSectionData): Promise<void>;
  deleteSection(id: string): Promise<void>;
  reorderSections(sectionIds: string[]): Promise<void>;
  toggleCollapsed(sectionId: string): void;
  isAdmin(sectionId: string): boolean;  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ admin –≤ —Ä–∞–∑–¥–µ–ª–µ
}
```

> –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª–∞–º–∏ (—Å–µ–∫—Ü–∏—è–º–∏) –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ workspaces. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–≤—ë—Ä–Ω—É—Ç—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage.

**useSlaStore**
```typescript
interface SlaUpdate {
  targetId: string;
  targetType: string;
  instanceId: string;
  responseRemainingMinutes: number | null;
  resolutionRemainingMinutes: number | null;
  responseUsedPercent: number | null;
  resolutionUsedPercent: number | null;
  isPaused: boolean;
}

interface SlaStore {
  slaUpdates: Map<string, SlaUpdate>;  // Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ O(1) –¥–æ—Å—Ç—É–ø–∞
  lastUpdateTime: number;

  setSlaUpdate(targetId: string, update: SlaUpdate): void;
  setSlaUpdates(updates: SlaUpdate[]): void;  // Batch update –æ—Ç WebSocket
  getSlaUpdate(targetId: string): SlaUpdate | undefined;
  clearSlaUpdates(): void;
}
```

> –•—Ä–∞–Ω–∏—Ç real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SLA –æ—Ç WebSocket. Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç batch-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥, –∫–ª–∏–µ–Ω—Ç –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ (1 —Å–µ–∫—É–Ω–¥–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª) –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞.

#### Hooks

**useWebSocket**
–ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ WebSocket —Å–æ–±—ã—Ç–∏—è:
- `entity:created` - –ù–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å
- `entity:updated` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
- `status:changed` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `comment:created` - –ù–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `user:assigned` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `sla:warning` - SLA –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –¥–µ–¥–ª–∞–π–Ω—É (toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)
- `sla:breached` - SLA –Ω–∞—Ä—É—à–µ–Ω (urgent toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ–ª—å—à–µ)
- `sla:batch-update` - Batch –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SLA —Ç–∞–π–º–µ—Ä–æ–≤ (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ useSlaStore)

> **URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** –í –±—Ä–∞—É–∑–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.location.origin` (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Ö–æ—Å—Ç). Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/socket.io/` –Ω–∞ backend. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—é–±–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (localhost, preprod, production) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**useBrowserNotifications**
–†–∞–±–æ—Ç–∞ —Å Browser Notification API:
```typescript
interface UseBrowserNotificationsReturn {
  permission: 'default' | 'granted' | 'denied';
  isSupported: boolean;
  requestPermission(): Promise<boolean>;
  showNotification(title: string, options?: BrowserNotificationOptions): void;
}
```

–¢–∞–∫–∂–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å–∏–Ω–≥–ª—Ç–æ–Ω `browserNotifications` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–≤ store). –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤–∫–ª–∞–¥–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞ (document.hasFocus() === false).

**useFocusTrap**
Focus trap –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω:
```typescript
function useFocusTrap(
  containerRef: RefObject<HTMLElement | null>,
  isActive: boolean
): void;
```

> –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ–æ–∫—É—Å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π —Ñ–æ–∫—É—Å–∏—Ä—É–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç. Tab/Shift+Tab —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ñ–æ–∫—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–Ω–µ–µ –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç.

### Backend (NestJS 11)

#### –ú–æ–¥—É–ª–∏

**AuthModule**
JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å Passport.js.

```
auth/
‚îú‚îÄ‚îÄ auth.module.ts
‚îú‚îÄ‚îÄ auth.controller.ts       # login, logout, refresh, me
‚îú‚îÄ‚îÄ auth.service.ts          # validateUser, login, refreshTokens
‚îú‚îÄ‚îÄ strategies/
‚îÇ   ‚îú‚îÄ‚îÄ jwt.strategy.ts      # –ü—Ä–æ–≤–µ—Ä–∫–∞ access token
‚îÇ   ‚îî‚îÄ‚îÄ local.strategy.ts    # –õ–æ–≥–∏–Ω –ø–æ email/password
‚îú‚îÄ‚îÄ guards/
‚îÇ   ‚îú‚îÄ‚îÄ jwt-auth.guard.ts    # –ì–ª–æ–±–∞–ª—å–Ω—ã–π guard
‚îÇ   ‚îú‚îÄ‚îÄ local-auth.guard.ts
‚îÇ   ‚îî‚îÄ‚îÄ roles.guard.ts       # RBAC
‚îú‚îÄ‚îÄ decorators/
‚îÇ   ‚îú‚îÄ‚îÄ current-user.decorator.ts
‚îÇ   ‚îú‚îÄ‚îÄ roles.decorator.ts
‚îÇ   ‚îî‚îÄ‚îÄ public.decorator.ts
‚îî‚îÄ‚îÄ dto/
    ‚îî‚îÄ‚îÄ login.dto.ts
```

**WorkspaceModule**
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏–º–∏ –º–µ—Å—Ç–∞–º–∏ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–æ–ª—è–º–∏.

```typescript
interface Workspace {
  id: string;
  name: string;
  icon: string;
  prefix: string;           // –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –Ω–æ–º–µ—Ä–æ–≤ –∑–∞—è–≤–æ–∫: TP, REK –∏ —Ç.–¥.
  lastEntityNumber: number; // –°—á—ë—Ç—á–∏–∫ –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤
  isArchived: boolean;      // –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω –ª–∏ workspace
  sectionId: string | null; // ID —Ä–∞–∑–¥–µ–ª–∞ (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)
  section: Section | null;  // –°–≤—è–∑–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª
  showInMenu: boolean;      // –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
  orderInSection: number;   // –ü–æ—Ä—è–¥–æ–∫ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–∞
  sections: WorkspaceSection[];  // –°–µ–∫—Ü–∏–∏ —Å –ø–æ–ª—è–º–∏ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ workspace)
  createdAt: Date;
  updatedAt: Date;
}

interface Section {
  id: string;
  name: string;
  fields: Field[];
  order: number;
}

interface FieldOption {
  id: string;
  label: string;
  color?: string;  // –¶–≤–µ—Ç –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ select
}

interface Field {
  id: string;
  name: string;
  type: 'text' | 'textarea' | 'number' | 'date' | 'select' | 'status' | 'user' | 'file' | 'relation';
  required?: boolean;
  options?: FieldOption[];  // –î–ª—è select –∏ status
  defaultValue?: any;
  description?: string;
  relatedWorkspaceId?: string;  // –î–ª—è relation —Ç–∏–ø–∞
}
```

> **–í–∞–∂–Ω–æ:** –ü–æ–ª–µ —Ç–∏–ø–∞ `status` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ –∫–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏. –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞ (`FieldOption`) —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–æ–ª–æ–Ω–∫–æ–π.

> **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—É—â–Ω–æ—Å—Ç–∏ `customId` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{prefix}-{number}` (–Ω–∞–ø—Ä–∏–º–µ—Ä, TP-1340, REK-1341). –ù–æ–º–µ—Ä–∞ **–≥–ª–æ–±–∞–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã** –≤–æ –≤—Å—ë–º –ø–æ—Ä—Ç–∞–ª–µ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ `global_counters` —Å –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ü–æ–ª–µ customId –∏–º–µ–µ—Ç UNIQUE constraint –≤ –ë–î.

**EntityModule**
–°—É—â–Ω–æ—Å—Ç–∏ (–∑–∞—è–≤–∫–∏, —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ –∏ —Ç.–¥.) –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

```typescript
interface WorkspaceEntity {
  id: string;
  customId: string;          // TP-1234, REK-001
  workspaceId: string;
  title: string;
  status: string;
  priority: 'low' | 'medium' | 'high';
  assigneeId: string | null;
  assignee: User;
  data: Record<string, any>; // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è
  linkedEntityIds: string[]; // –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
  comments: Comment[];
  createdAt: Date;
  updatedAt: Date;
}

interface Comment {
  id: string;
  entityId: string;
  authorId: string;
  author: User;
  content: string;           // HTML –∏–∑ Tiptap
  mentionedUserIds: string[];
  attachments: Attachment[];
  createdAt: Date;
  updatedAt: Date;
}
```

**UserModule**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã.

```typescript
interface User {
  id: string;
  email: string;
  password: string;  // @Exclude() - –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ API
  firstName: string;
  lastName: string;
  avatar: string | null;
  department: string | null;
  role: 'admin' | 'manager' | 'employee';
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

**WebsocketModule**
WebSocket Gateway –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

```typescript
// –°–æ–±—ã—Ç–∏—è (emit):
emitEntityCreated(entity)    // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
emitEntityUpdated(entity)    // –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
emitStatusChanged({id, status, entity})  // –ü—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞
emitCommentCreated(comment)  // –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
emitAssigneeChanged({entityId, entity, assigneeId, previousAssigneeId})  // –ü—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏
emitToWorkspace(workspaceId, event, data)  // Broadcast –≤ workspace
emitToUser(userId, event, data)  // –õ–∏—á–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

// SLA —Å–æ–±—ã—Ç–∏—è (—á–µ—Ä–µ–∑ emitToWorkspace):
// 'sla:warning' - –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –¥–µ–¥–ª–∞–π–Ω
// 'sla:breached' - SLA –Ω–∞—Ä—É—à–µ–Ω
```

**S3Module**
–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π Yandex Object Storage —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ø—Ä–µ–≤—å—é –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ signed URLs –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

```typescript
interface S3Service {
  uploadFile(file: Express.Multer.File, path: string): Promise<string>;
  uploadFileWithThumbnail(file: Express.Multer.File, path: string): Promise<{key: string; thumbnailKey?: string}>;
  getSignedUrl(key: string, expiresIn?: number): Promise<string>;
  getSignedUrlsBatch(keys: string[], expiresIn?: number): Promise<Map<string, string>>;
  getFileStream(key: string): Promise<{stream: NodeJS.ReadableStream; contentType: string; contentLength: number}>;
}

// –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î (comment.attachments JSONB)
interface StoredAttachment {
  id: string;
  name: string;
  size: number;
  key: string;           // S3 –∫–ª—é—á —Ñ–∞–π–ª–∞
  mimeType: string;
  thumbnailKey?: string; // S3 –∫–ª—é—á –ø—Ä–µ–≤—å—é –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
}

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É (—Å signed URLs)
interface Attachment {
  id: string;
  name: string;
  size: number;
  url: string;           // Signed URL (1 —á–∞—Å)
  mimeType: string;
  thumbnailUrl?: string; // Signed URL –ø—Ä–µ–≤—å—é
}
```

> **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –±–∞–∫–µ—Ç:** –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º S3-–±–∞–∫–µ—Ç–µ. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ signed URLs –¥–ª—è –ø—Ä–µ–≤—å—é. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–µ–∂–∏–µ signed URLs (1 —á–∞—Å) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–ª–æ–∂–µ–Ω–∏—è. –î–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏-—ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/files/download/*path`, –∫–æ—Ç–æ—Ä—ã–π —Å–∫—Ä—ã–≤–∞–µ—Ç S3-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–π–ª –∫–∞–∫ attachment (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –∞ –Ω–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ).

> **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—å—é:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è thumbnail 200x200px –≤ —Ñ–æ—Ä–º–∞—Ç–µ JPEG —Å –∫–∞—á–µ—Å—Ç–≤–æ–º 80%. –ü—Ä–µ–≤—å—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `/attachments/thumbnails/`.

**AuditLogModule**
–ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (Audit Log) –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.

```typescript
enum AuditActionType {
  ENTITY_CREATED = 'entity:created',
  ENTITY_UPDATED = 'entity:updated',
  ENTITY_DELETED = 'entity:deleted',
  ENTITY_STATUS_CHANGED = 'entity:status:changed',
  ENTITY_ASSIGNEE_CHANGED = 'entity:assignee:changed',
  COMMENT_CREATED = 'comment:created',
  COMMENT_UPDATED = 'comment:updated',
  COMMENT_DELETED = 'comment:deleted',
  FILE_UPLOADED = 'file:uploaded',
  FILE_DELETED = 'file:deleted',
}

interface AuditLog {
  id: string;
  action: AuditActionType;
  actorId: string | null;    // null –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
  actor: User | null;
  entityId: string | null;
  entity: WorkspaceEntity | null;
  workspaceId: string;
  details: {
    description: string;      // –ß–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
    oldValues?: Record<string, any>;
    newValues?: Record<string, any>;
    changedFields?: string[];
    fileName?: string;
    commentId?: string;
  };
  createdAt: Date;
}
```

> **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** EntityService –∏ CommentService –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –≤ audit log –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è. –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É "–ò—Å—Ç–æ—Ä–∏—è" –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª–∏ —Å—É—â–Ω–æ—Å—Ç–∏.

**EmailModule**
Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ SMTP.

```typescript
interface EmailService {
  send(options: EmailOptions): Promise<boolean>;
  sendAssignmentNotification(assignee, entity, assignedBy, frontendUrl): Promise<boolean>;
  sendCommentNotification(recipient, entity, commentAuthor, commentPreview, frontendUrl): Promise<boolean>;
  sendStatusChangeNotification(recipient, entity, changedBy, oldStatus, newStatus, frontendUrl): Promise<boolean>;
  sendSlaWarningNotification(recipient, entity, slaName, type, remainingMinutes, usedPercent, frontendUrl): Promise<boolean>;
  sendSlaBreachNotification(recipient, entity, slaName, type, frontendUrl): Promise<boolean>;
}
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `SMTP_ENABLED` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)
- `SMTP_HOST`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASS` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP
- `SMTP_FROM_EMAIL`, `SMTP_FROM_NAME` - –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å

> **–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –ø—Ä–∏: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –Ω–∞ –∑–∞—è–≤–∫—É, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

**AutomationModule**
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ —Å–æ–±—ã—Ç–∏—è–º (—Ç—Ä–∏–≥–≥–µ—Ä—ã, —É—Å–ª–æ–≤–∏—è, –¥–µ–π—Å—Ç–≤–∏—è).

```typescript
enum TriggerType {
  ON_CREATE = 'on_create',           // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏
  ON_STATUS_CHANGE = 'on_status_change', // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
  ON_FIELD_CHANGE = 'on_field_change',   // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—è
  ON_ASSIGN = 'on_assign',           // –ü—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
  ON_COMMENT = 'on_comment',         // –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  SCHEDULED = 'scheduled',           // –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron)
}

enum ActionType {
  SET_STATUS = 'set_status',         // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
  SET_ASSIGNEE = 'set_assignee',     // –ù–∞–∑–Ω–∞—á–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
  SET_PRIORITY = 'set_priority',     // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  SET_FIELD = 'set_field',           // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
  SEND_NOTIFICATION = 'send_notification', // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  SEND_EMAIL = 'send_email',         // –û—Ç–ø—Ä–∞–≤–∏—Ç—å email
  EVALUATE_DMN = 'evaluate_dmn',     // –í—ã—á–∏—Å–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–µ—à–µ–Ω–∏–π DMN
}

enum ConditionOperator {
  EQUALS = 'equals',
  NOT_EQUALS = 'not_equals',
  CONTAINS = 'contains',
  NOT_CONTAINS = 'not_contains',
  STARTS_WITH = 'starts_with',
  ENDS_WITH = 'ends_with',
  IS_EMPTY = 'is_empty',
  IS_NOT_EMPTY = 'is_not_empty',
  GREATER_THAN = 'greater_than',
  LESS_THAN = 'less_than',
  CHANGED_TO = 'changed_to',
  CHANGED_FROM = 'changed_from',
}

interface AutomationRule {
  id: string;
  workspaceId: string;
  name: string;
  description?: string;
  trigger: TriggerType;
  triggerConfig?: Record<string, any>;  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞
  conditions: RuleCondition[];          // –£—Å–ª–æ–≤–∏—è (AND –ª–æ–≥–∏–∫–∞)
  actions: RuleAction[];                // –î–µ–π—Å—Ç–≤–∏—è (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
  isEnabled: boolean;
  executionCount: number;
  lastExecutedAt?: Date;
  createdAt: Date;
  updatedAt: Date;
}

interface RuleCondition {
  field: string;       // –ü–æ–ª–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (status, priority, assigneeId, data.*)
  operator: ConditionOperator;
  value?: any;
}

interface RuleAction {
  type: ActionType;
  config: {
    // SET_STATUS
    status?: string;
    // SET_ASSIGNEE
    assigneeId?: string | null;
    assigneeMode?: 'specific' | 'creator' | 'round_robin';
    // SET_PRIORITY
    priority?: 'low' | 'medium' | 'high';
    // SET_FIELD
    fieldId?: string;
    fieldValue?: any;
    // SEND_NOTIFICATION / SEND_EMAIL
    recipientMode?: 'assignee' | 'creator' | 'specific' | 'all_workspace_members';
    recipientId?: string;
    message?: string;
    subject?: string;
    // EVALUATE_DMN
    decisionTableId?: string;           // ID —Ç–∞–±–ª–∏—Ü—ã —Ä–µ—à–µ–Ω–∏–π
    inputMapping?: Record<string, string>; // –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π entity ‚Üí DMN input
    outputMapping?: Record<string, string>; // –ú–∞–ø–ø–∏–Ω–≥ DMN output ‚Üí –ø–æ–ª–µ–π entity
    applyOutputToEntity?: boolean;      // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫ entity
  };
}
```

> **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª:** –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ç.–¥.) AutomationService –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –≤–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è workspace, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è. –ü—Ä–∞–≤–∏–ª–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞.

**SectionModule**
–†–∞–∑–¥–µ–ª—ã –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –¥–æ—Å—Ç—É–ø–∞.

```
section/
‚îú‚îÄ‚îÄ section.module.ts
‚îú‚îÄ‚îÄ section.controller.ts       # CRUD —Ä–∞–∑–¥–µ–ª–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ section.service.ts          # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏
‚îú‚îÄ‚îÄ section.entity.ts           # Section entity
‚îú‚îÄ‚îÄ section-member.entity.ts    # SectionMember entity
‚îî‚îÄ‚îÄ dto/
    ‚îú‚îÄ‚îÄ create-section.dto.ts
    ‚îú‚îÄ‚îÄ update-section.dto.ts
    ‚îú‚îÄ‚îÄ add-section-member.dto.ts
    ‚îî‚îÄ‚îÄ update-section-member.dto.ts
```

```typescript
enum SectionRole {
  VIEWER = 'viewer',  // –í–∏–¥–∏—Ç —Ä–∞–∑–¥–µ–ª –∏ –µ–≥–æ workspaces
  ADMIN = 'admin',    // –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª–æ–º –∏ –µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
}

interface Section {
  id: string;
  name: string;
  description?: string;
  icon: string;           // –≠–º–æ–¥–∂–∏ –∏–∫–æ–Ω–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é üìÅ)
  order: number;          // –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  workspaces: Workspace[];
  members: SectionMember[];
  createdAt: Date;
  updatedAt: Date;
}

interface SectionMember {
  id: string;
  sectionId: string;
  userId: string;
  user: User;
  role: SectionRole;
  createdAt: Date;
}
```

> **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π admin –≤–∏–¥–∏—Ç –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ä–∞–∑–¥–µ–ª—ã, –≥–¥–µ –æ–Ω–∏ –ª–∏–±–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–∞–∑–¥–µ–ª–∞, –ª–∏–±–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ workspace –≤ —Ä–∞–∑–¥–µ–ª–µ. –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–¥–∞–ª—è—Ç—å –Ω–µ–ø—É—Å—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã (—Å workspaces).

**BpmnModule**
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Camunda 8 Platform –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (BPMN 2.0).

```
bpmn/
‚îú‚îÄ‚îÄ bpmn.module.ts
‚îú‚îÄ‚îÄ bpmn.controller.ts       # API –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
‚îú‚îÄ‚îÄ bpmn.service.ts          # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
‚îú‚îÄ‚îÄ camunda/
‚îÇ   ‚îî‚îÄ‚îÄ camunda.service.ts   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zeebe —á–µ—Ä–µ–∑ @camunda8/sdk
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ create-process-definition.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ start-process.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ send-message.dto.ts
‚îî‚îÄ‚îÄ entities/
    ‚îú‚îÄ‚îÄ process-definition.entity.ts
    ‚îî‚îÄ‚îÄ process-instance.entity.ts
```

```typescript
interface ProcessDefinition {
  id: string;
  workspaceId: string;
  name: string;
  description?: string;
  processId: string;        // BPMN Process ID (–∏–∑ XML)
  bpmnXml: string;          // –ò—Å—Ö–æ–¥–Ω—ã–π BPMN XML
  version: number;
  deployedKey?: string;     // Zeebe deployment key
  deployedAt?: Date;
  createdAt: Date;
  updatedAt: Date;
}

interface ProcessInstance {
  id: string;
  definitionId: string;
  entityId?: string;        // –°–≤—è–∑–∞–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å (–∑–∞—è–≤–∫–∞)
  workspaceId: string;
  zeebeKey: string;         // Zeebe process instance key
  status: 'active' | 'completed' | 'terminated' | 'incident';
  variables: Record<string, any>;
  startedAt: Date;
  endedAt?: Date;
  createdAt: Date;
  updatedAt: Date;
}
```

**Camunda Integration:**
- Zeebe gRPC API —á–µ—Ä–µ–∑ `@camunda8/sdk`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `ZEEBE_ADDRESS`, `ZEEBE_CLIENT_ID`, `ZEEBE_CLIENT_SECRET`
- Deployment: –¥–µ–ø–ª–æ–π BPMN XML –≤ Zeebe –∫–ª–∞—Å—Ç–µ—Ä
- Process Instance: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- Message Correlation: –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø—Ä–æ—Ü–µ—Å—Å—ã

**SlaModule**
–ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SLA (Service Level Agreement) –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ä–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫.

```
sla/
‚îú‚îÄ‚îÄ sla.module.ts
‚îú‚îÄ‚îÄ sla.controller.ts       # API –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ SLA
‚îú‚îÄ‚îÄ sla.service.ts          # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å SLA
‚îú‚îÄ‚îÄ sla-calculator.service.ts # –†–∞—Å—á—ë—Ç –¥–µ–¥–ª–∞–π–Ω–æ–≤ —Å —É—á—ë—Ç–æ–º —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îú‚îÄ‚îÄ sla-definition.entity.ts  # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SLA
‚îÇ   ‚îú‚îÄ‚îÄ sla-instance.entity.ts    # –≠–∫–∑–µ–º–ø–ª—è—Ä SLA –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ sla-event.entity.ts       # –°–æ–±—ã—Ç–∏—è SLA (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–∞—É–∑–∞, –Ω–∞—Ä—É—à–µ–Ω–∏–µ)
‚îî‚îÄ‚îÄ dto/
    ‚îî‚îÄ‚îÄ create-sla-definition.dto.ts
```

```typescript
interface SlaDefinition {
  id: string;
  workspaceId: string;
  name: string;
  description?: string;
  appliesTo: 'entity' | 'task' | 'process';  // –¢–∏–ø —Ü–µ–ª–∏
  conditions: SlaConditions;      // –£—Å–ª–æ–≤–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è (priority, category)
  responseTime?: number;          // –í—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç (–º–∏–Ω—É—Ç—ã)
  resolutionTime?: number;        // –í—Ä–µ–º—è –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ (–º–∏–Ω—É—Ç—ã)
  warningThreshold: number;       // –ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (%)
  businessHoursOnly: boolean;     // –°—á–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
  businessHours: BusinessHours;   // –†–∞–±–æ—á–∏–µ —á–∞—Å—ã
  escalationRules: EscalationRule[]; // –ü—Ä–∞–≤–∏–ª–∞ —ç—Å–∫–∞–ª–∞—Ü–∏–∏
  isActive: boolean;
  priority: number;               // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö)
}

interface BusinessHours {
  start: string;     // "09:00"
  end: string;       // "18:00"
  timezone: string;  // "Europe/Moscow"
  workdays: number[]; // [1,2,3,4,5] (–ü–Ω-–ü—Ç)
}

interface SlaInstance {
  id: string;
  slaDefinitionId: string;
  targetType: 'entity' | 'task' | 'process';
  targetId: string;
  responseDueAt?: Date;      // –î–µ–¥–ª–∞–π–Ω –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
  resolutionDueAt?: Date;    // –î–µ–¥–ª–∞–π–Ω —Ä–µ—à–µ–Ω–∏—è
  responseStatus: 'pending' | 'met' | 'breached';
  resolutionStatus: 'pending' | 'met' | 'breached';
  firstResponseAt?: Date;
  resolvedAt?: Date;
  isPaused: boolean;
  totalPausedMinutes: number;
  currentEscalationLevel: number;
}
```

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ SLA —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—É—â–Ω–æ—Å—Ç–∏ (EntityService –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å SlaService)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (CommentService)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å (closed, done, resolved, cancelled, completed)
- –†–∞—Å—á—ë—Ç –¥–µ–¥–ª–∞–π–Ω–æ–≤ —Å —É—á—ë—Ç–æ–º —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–ø—Ä–æ–ø—É—Å–∫ –≤—ã—Ö–æ–¥–Ω—ã—Ö)
- –ü–∞—É–∑–∞ SLA (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π (cron –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
- WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –¥–µ–¥–ª–∞–π–Ω—É (`sla:warning`) –∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ (`sla:breached`)
- –≠—Å–∫–∞–ª–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –¥–µ–¥–ª–∞–π–Ω—É
- –î–∞—à–±–æ—Ä–¥ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ/–Ω–∞—Ä—É—à–µ–Ω–æ/–≤ —Ä–∏—Å–∫–µ)

**WebSocket —Å–æ–±—ã—Ç–∏—è SLA:**
| –°–æ–±—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `sla:warning` | SLA –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –¥–µ–¥–ª–∞–π–Ω—É (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç warningThreshold) |
| `sla:breached` | SLA –Ω–∞—Ä—É—à–µ–Ω (–¥–µ–¥–ª–∞–π–Ω –∏—Å—Ç—ë–∫) |

**Payload WebSocket —Å–æ–±—ã—Ç–∏–π:**
```typescript
interface SlaNotificationPayload {
  workspaceId: string;
  instanceId: string;
  targetType: 'entity' | 'task' | 'process';
  targetId: string;
  type: 'response' | 'resolution';
  definitionName: string;
  dueAt: Date;
  usedPercent?: number;   // —Ç–æ–ª—å–∫–æ –¥–ª—è warning
  threshold?: number;      // —Ç–æ–ª—å–∫–æ –¥–ª—è warning
}
```

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã SLA:**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/sla/definitions?workspaceId=:id | –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π SLA |
| GET | /api/sla/definitions/:id | –î–µ—Ç–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è |
| POST | /api/sla/definitions | –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SLA |
| PUT | /api/sla/definitions/:id | –û–±–Ω–æ–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ |
| DELETE | /api/sla/definitions/:id | –£–¥–∞–ª–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ |
| GET | /api/sla/status/:targetType/:targetId | –°—Ç–∞—Ç—É—Å SLA –¥–ª—è —Ü–µ–ª–∏ |
| GET | /api/sla/dashboard?workspaceId=:id | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ SLA |
| POST | /api/sla/instances/:id/pause | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SLA |
| POST | /api/sla/instances/:id/resume | –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å SLA |

**DmnModule**
–ú–æ–¥—É–ª—å —Ç–∞–±–ª–∏—Ü —Ä–µ—à–µ–Ω–∏–π (Decision Model and Notation) –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª.

```
dmn/
‚îú‚îÄ‚îÄ dmn.module.ts
‚îú‚îÄ‚îÄ dmn.controller.ts         # API –¥–ª—è —Ç–∞–±–ª–∏—Ü —Ä–µ—à–µ–Ω–∏–π
‚îú‚îÄ‚îÄ dmn.service.ts            # CRUD –∏ –≤—ã–∑–æ–≤ evaluator
‚îú‚îÄ‚îÄ dmn-evaluator.service.ts  # –î–≤–∏–∂–æ–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª
‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îú‚îÄ‚îÄ decision-table.entity.ts   # –¢–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ decision-evaluation.entity.ts # –õ–æ–≥ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ dto/
    ‚îî‚îÄ‚îÄ create-decision-table.dto.ts
```

```typescript
type HitPolicy = 'UNIQUE' | 'FIRST' | 'ANY' | 'COLLECT' | 'RULE_ORDER';

interface DecisionTable {
  id: string;
  workspaceId: string;
  name: string;
  description?: string;
  hitPolicy: HitPolicy;          // –ü–æ–ª–∏—Ç–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª–∞
  inputColumns: InputColumn[];   // –í—Ö–æ–¥–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
  outputColumns: OutputColumn[]; // –í—ã—Ö–æ–¥–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
  rules: DecisionRule[];         // –ü—Ä–∞–≤–∏–ª–∞
  isActive: boolean;
  version: number;
}

interface InputColumn {
  id: string;
  name: string;           // –ò–º—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ inputData
  label: string;          // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
  type: 'string' | 'number' | 'boolean' | 'date';
}

interface DecisionRule {
  id: string;
  description?: string;
  inputs: Record<string, RuleCondition>;  // –£—Å–ª–æ–≤–∏—è –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º
  outputs: Record<string, unknown>;       // –í—ã—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
}

interface RuleCondition {
  operator: 'eq' | 'neq' | 'gt' | 'gte' | 'lt' | 'lte' | 'in' | 'not_in' | 'contains' | 'between' | 'any';
  value: unknown;
  value2?: unknown;  // –î–ª—è 'between'
}
```

**Hit Policies:**
- `UNIQUE` - —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞—Å—Ç—å (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö)
- `FIRST` - –ø–µ—Ä–≤–æ–µ —Å–æ–≤–ø–∞–≤—à–µ–µ –ø—Ä–∞–≤–∏–ª–æ (–ø–æ –ø–æ—Ä—è–¥–∫—É)
- `ANY` - –ª—é–±–æ–µ —Å–æ–≤–ø–∞–≤—à–µ–µ (–≤—Å–µ –¥–æ–ª–∂–Ω—ã –¥–∞–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- `COLLECT` - —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ —Å–æ–≤–ø–∞–≤—à–∏–µ –≤—ã—Ö–æ–¥—ã –≤ –º–∞—Å—Å–∏–≤
- `RULE_ORDER` - –≤—Å–µ —Å–æ–≤–ø–∞–≤—à–∏–µ –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∞–≤–∏–ª

**–û–ø–µ—Ä–∞—Ç–æ—Ä—ã —É—Å–ª–æ–≤–∏–π:**
- `eq`, `neq` - —Ä–∞–≤–Ω–æ/–Ω–µ —Ä–∞–≤–Ω–æ (case-insensitive –¥–ª—è —Å—Ç—Ä–æ–∫)
- `gt`, `gte`, `lt`, `lte` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —á–∏—Å–µ–ª
- `in`, `not_in` - –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤
- `contains` - –ø–æ–¥—Å—Ç—Ä–æ–∫–∞ (case-insensitive)
- `between` - –¥–∏–∞–ø–∞–∑–æ–Ω (value <= x <= value2)
- `any` - –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ø—Ä–æ–ø—É—Å–∫ —É—Å–ª–æ–≤–∏—è)

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã DMN:**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/dmn/tables?workspaceId=:id | –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü —Ä–µ—à–µ–Ω–∏–π |
| GET | /api/dmn/tables/:id | –î–µ—Ç–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—ã |
| POST | /api/dmn/tables | –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| PUT | /api/dmn/tables/:id | –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| DELETE | /api/dmn/tables/:id | –£–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| POST | /api/dmn/tables/:id/clone | –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| POST | /api/dmn/evaluate | –í—ã—á–∏—Å–ª–∏—Ç—å —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| POST | /api/dmn/evaluate/quick | –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ (–±–µ–∑ –ª–æ–≥–∞) |
| POST | /api/dmn/evaluate/by-name | –í—ã—á–∏—Å–ª–∏—Ç—å –ø–æ –∏–º–µ–Ω–∏ —Ç–∞–±–ª–∏—Ü—ã |
| GET | /api/dmn/tables/:id/evaluations | –ò—Å—Ç–æ—Ä–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π |
| GET | /api/dmn/tables/:id/statistics | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–æ–ø–∞–¥–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª) |
| GET | /api/dmn/evaluations/target/:type/:id | –í—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è —Ü–µ–ª–∏ |

**–§—É–Ω–∫—Ü–∏–∏ Workspace**

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–∞–±–æ—á–∏–º–∏ –º–µ—Å—Ç–∞–º–∏:

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ–∑–¥–∞—ë—Ç –∫–æ–ø–∏—é workspace —Å–æ –≤—Å–µ–º–∏ —Å–µ–∫—Ü–∏—è–º–∏ –∏ –ø–æ–ª—è–º–∏:
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ UUID –¥–ª—è workspace, —Å–µ–∫—Ü–∏–π –∏ –ø–æ–ª–µ–π
   - –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –Ω–æ–º–µ—Ä–æ–≤ (lastEntityNumber = 0)
   - –ù–µ –∫–æ–ø–∏—Ä—É–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏, —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

2. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–∫—Ä—ã–≤–∞–µ—Ç workspace –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `isArchived: true`
   - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ workspace –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–º —Å—Ç–∏–ª–µ–º –∏ –∏–∫–æ–Ω–∫–æ–π –∞—Ä—Ö–∏–≤–∞
   - –ú–æ–∂–Ω–æ —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ

3. **–≠–∫—Å–ø–æ—Ä—Ç JSON** - –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø workspace:
   - –í–∫–ª—é—á–∞–µ—Ç workspace —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ–∫—Ü–∏–π/–ø–æ–ª–µ–π
   - –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å –ø–æ–ª—è–º–∏
   - –î–æ–±–∞–≤–ª—è–µ—Ç timestamp —ç–∫—Å–ø–æ—Ä—Ç–∞

4. **–≠–∫—Å–ø–æ—Ä—Ç CSV** - —Ç–∞–±–ª–∏—á–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç —Å—É—â–Ω–æ—Å—Ç–µ–π:
   - –§–æ—Ä–º–∞—Ç —Å BOM –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Excel
   - –ö–æ–ª–æ–Ω–∫–∏: ID, –ù–æ–º–µ—Ä, –ù–∞–∑–≤–∞–Ω–∏–µ, –°—Ç–∞—Ç—É—Å, –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å, –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

#### API Endpoints

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/entities | –°–ø–∏—Å–æ–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π (query: workspaceId) |
| GET | /api/entities/:id | –î–µ—Ç–∞–ª–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ |
| POST | /api/entities | –°–æ–∑–¥–∞—Ç—å |
| PUT | /api/entities/:id | –û–±–Ω–æ–≤–∏—Ç—å |
| PATCH | /api/entities/:id/status | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å |
| PATCH | /api/entities/:id/assignee | –ù–∞–∑–Ω–∞—á–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ |
| DELETE | /api/entities/:id | –£–¥–∞–ª–∏—Ç—å |
| DELETE | /api/entities/cleanup/test-data | –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (E2E) |
| GET | /api/comments/entity/:id | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å—É—â–Ω–æ—Å—Ç–∏ |
| POST | /api/comments/entity/:id | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
| PUT | /api/comments/:id | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å |
| DELETE | /api/comments/:id | –£–¥–∞–ª–∏—Ç—å |
| GET | /api/users | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| POST | /api/users | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin) |
| PUT | /api/users/:id | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin) |
| DELETE | /api/users/:id | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin) |
| GET | /api/workspaces | –°–ø–∏—Å–æ–∫ —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç |
| GET | /api/workspaces/my-roles | –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Å–µ—Ö workspaces |
| GET | /api/workspaces/:id | –î–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞ |
| GET | /api/workspaces/:id/my-role | –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ workspace |
| GET | /api/workspaces/:id/members | –£—á–∞—Å—Ç–Ω–∏–∫–∏ workspace |
| POST | /api/workspaces | –°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ (admin) |
| POST | /api/workspaces/:id/duplicate | –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å workspace (admin) |
| POST | /api/workspaces/:id/members | –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (workspace admin) |
| PUT | /api/workspaces/:id | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É (admin) |
| PUT | /api/workspaces/:id/members/:userId | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| PATCH | /api/workspaces/:id/archive | –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (admin) |
| DELETE | /api/workspaces/:id/members/:userId | –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| GET | /api/workspaces/:id/export/json | –≠–∫—Å–ø–æ—Ä—Ç workspace –≤ JSON |
| GET | /api/workspaces/:id/export/csv | –≠–∫—Å–ø–æ—Ä—Ç entities –≤ CSV |
| POST | /api/workspaces/:id/import/json | –ò–º–ø–æ—Ä—Ç entities –∏–∑ JSON |
| POST | /api/workspaces/:id/import/csv | –ò–º–ø–æ—Ä—Ç entities –∏–∑ CSV |
| PATCH | /api/workspaces/:id/section | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª workspace |
| PATCH | /api/workspaces/:id/show-in-menu | –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –≤ –º–µ–Ω—é |
| POST | /api/workspaces/reorder | –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ workspaces |
| GET | /api/sections | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ |
| GET | /api/sections/:id | –î–µ—Ç–∞–ª–∏ —Ä–∞–∑–¥–µ–ª–∞ |
| GET | /api/sections/my-roles | –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö |
| POST | /api/sections | –°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª (—Ç–æ–ª—å–∫–æ admin) |
| PUT | /api/sections/:id | –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª |
| DELETE | /api/sections/:id | –£–¥–∞–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª (—Ç–æ–ª—å–∫–æ –ø—É—Å—Ç–æ–π) |
| POST | /api/sections/reorder | –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤ |
| GET | /api/sections/:id/members | –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–∞–∑–¥–µ–ª–∞ |
| POST | /api/sections/:id/members | –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| PUT | /api/sections/:id/members/:userId | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| DELETE | /api/sections/:id/members/:userId | –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| GET | /api/search | –ì–ª–æ–±–∞–ª—å–Ω—ã–π FTS –ø–æ–∏—Å–∫ (query: q, workspaceId, types, limit) |
| GET | /api/search/entities | FTS –ø–æ–∏—Å–∫ –ø–æ –∑–∞—è–≤–∫–∞–º |
| GET | /api/search/comments | FTS –ø–æ–∏—Å–∫ –ø–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º |
| GET | /api/analytics/global | –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º workspace |
| GET | /api/analytics/workspace/:id | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ workspace |
| POST | /api/files/upload | –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –≤ S3 |
| GET | /api/files/signed-url/:key | –ü–æ–ª—É—á–∏—Ç—å signed URL –¥–ª—è –∫–ª—é—á–∞ |
| GET | /api/files/download/*path | –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ (attachment) |
| GET | /api/audit-logs/entity/:entityId | –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏ |
| GET | /api/audit-logs/workspace/:workspaceId | –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ workspace |
| GET | /api/automation?workspaceId=:id | –°–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ |
| GET | /api/automation/:id | –î–µ—Ç–∞–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ |
| POST | /api/automation | –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ (workspace admin) |
| PUT | /api/automation/:id | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ (workspace admin) |
| PATCH | /api/automation/:id/toggle | –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ |
| DELETE | /api/automation/:id | –£–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ (workspace admin) |
| GET | /api/bpmn/health | –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Camunda/Zeebe |
| GET | /api/bpmn/definitions?workspaceId=:id | –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ |
| GET | /api/bpmn/definitions/:id | –î–µ—Ç–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| POST | /api/bpmn/definitions | –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| POST | /api/bpmn/definitions/:id/deploy | –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤ Zeebe |
| GET | /api/bpmn/instances/workspace/:workspaceId | –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ workspace |
| GET | /api/bpmn/instances/entity/:entityId | –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ |
| POST | /api/bpmn/instances | –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| POST | /api/bpmn/instances/:id/message | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å |
| GET | /api/bpmn/statistics/definition/:id | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| GET | /api/bpmn/statistics/workspace/:workspaceId | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ workspace |
| GET | /api/bpmn/triggers?workspaceId=:id | –°–ø–∏—Å–æ–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ |
| GET | /api/bpmn/triggers/:id | –î–µ—Ç–∞–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞ |
| POST | /api/bpmn/triggers | –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä |
| PUT | /api/bpmn/triggers/:id | –û–±–Ω–æ–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä |
| PATCH | /api/bpmn/triggers/:id/toggle | –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä |
| DELETE | /api/bpmn/triggers/:id | –£–¥–∞–ª–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä |
| GET | /api/bpmn/triggers/:id/executions | –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ |
| POST | /api/bpmn/webhooks/:workspaceId/:triggerId | Webhook endpoint –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ |
| GET | /api/bpmn/tasks/inbox | –ó–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (inbox) |
| GET | /api/bpmn/tasks | –ü–æ–∏—Å–∫/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á |
| GET | /api/bpmn/tasks/statistics?workspaceId=:id | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–¥–∞—á–∞–º |
| GET | /api/bpmn/tasks/:id | –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏ —Å —Ñ–æ—Ä–º–æ–π |
| GET | /api/bpmn/tasks/:id/comments | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–∞–¥–∞—á–∏ |
| POST | /api/bpmn/tasks/:id/claim | –í–∑—è—Ç—å –∑–∞–¥–∞—á—É |
| POST | /api/bpmn/tasks/:id/unclaim | –û—Ç–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É |
| POST | /api/bpmn/tasks/:id/complete | –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º—ã |
| POST | /api/bpmn/tasks/:id/delegate | –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É |
| POST | /api/bpmn/tasks/:id/comments | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–¥–∞—á–µ |
| GET | /api/bpmn/entity-links/entity/:entityId | –°–≤—è–∑–∏ —Å—É—â–Ω–æ—Å—Ç–∏ |
| GET | /api/bpmn/entity-links/entity/:entityId/linked | –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏ |
| GET | /api/bpmn/entity-links/entity/:entityId/type/:type | –°–≤—è–∑–∏ –ø–æ —Ç–∏–ø—É |
| GET | /api/bpmn/entity-links/statistics?workspaceId=:id | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–≤—è–∑–µ–π |
| POST | /api/bpmn/entity-links | –°–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å |
| POST | /api/bpmn/entity-links/spawn | –°–æ–∑–¥–∞—Ç—å —Å—É—â–Ω–æ—Å—Ç—å –∏ —Å–≤—è–∑–∞—Ç—å |
| DELETE | /api/bpmn/entity-links/:id | –£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å |
| GET | /api/bpmn/templates | –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–±–µ–∑ XML) |
| GET | /api/bpmn/templates/:id | –®–∞–±–ª–æ–Ω —Å BPMN XML |
| GET | /api/bpmn/templates/category/:category | –®–∞–±–ª–æ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| GET | /api/bpmn/templates/categories | –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º |
| GET | /api/bpmn/templates/search?q=:query | –ü–æ–∏—Å–∫ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/—Ç–µ–≥–∞–º |
| GET | /api/bpmn/mining/process/:definitionId | Process Mining —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ |
| GET | /api/bpmn/mining/process/:definitionId/time | –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ (–¥–Ω–∏ –Ω–µ–¥–µ–ª–∏, —á–∞—Å—ã) |
| GET | /api/bpmn/mining/workspace/:workspaceId | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ workspace |
| GET | /api/entities/recommendations/assignees/:entityId | ML-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π |
| POST | /api/entities/recommendations/priority | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ |
| POST | /api/entities/recommendations/response-time | –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ |
| GET | /api/entities/recommendations/similar/:entityId | –ü–æ—Ö–æ–∂–∏–µ –∑–∞—è–≤–∫–∏ |
| GET | /api/sla/definitions?workspaceId=:id | –°–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π SLA |
| GET | /api/sla/definitions/:id | –î–µ—Ç–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è SLA |
| POST | /api/sla/definitions | –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SLA |
| PUT | /api/sla/definitions/:id | –û–±–Ω–æ–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SLA |
| DELETE | /api/sla/definitions/:id | –£–¥–∞–ª–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SLA |
| GET | /api/sla/status/:targetType/:targetId | –°—Ç–∞—Ç—É—Å SLA –¥–ª—è —Ü–µ–ª–∏ |
| GET | /api/sla/dashboard?workspaceId=:id | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ SLA |
| POST | /api/sla/instances/:id/pause | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SLA |
| POST | /api/sla/instances/:id/resume | –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å SLA |
| GET | /api/dmn/tables?workspaceId=:id | –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü —Ä–µ—à–µ–Ω–∏–π |
| GET | /api/dmn/tables/:id | –î–µ—Ç–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ—à–µ–Ω–∏–π |
| POST | /api/dmn/tables | –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–µ—à–µ–Ω–∏–π |
| PUT | /api/dmn/tables/:id | –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| DELETE | /api/dmn/tables/:id | –£–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| POST | /api/dmn/tables/:id/clone | –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É |
| POST | /api/dmn/evaluate | –í—ã—á–∏—Å–ª–∏—Ç—å —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| POST | /api/dmn/evaluate/quick | –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ |
| POST | /api/dmn/evaluate/by-name | –í—ã—á–∏—Å–ª–∏—Ç—å –ø–æ –∏–º–µ–Ω–∏ |
| GET | /api/dmn/tables/:id/evaluations | –ò—Å—Ç–æ—Ä–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π |
| GET | /api/dmn/tables/:id/statistics | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∞–≤–∏–ª |
| GET | /api/dmn/evaluations/target/:type/:id | –í—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è —Ü–µ–ª–∏ |

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. Drag & Drop –≤ –∫–∞–Ω–±–∞–Ω–µ

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É
        ‚îÇ
        ‚ñº
KanbanBoard.handleDragEnd()
        ‚îÇ
        ‚ñº
useEntityStore.updateStatus(id, newStatus)
        ‚îÇ
        ‚îú‚îÄ‚îÄ Optimistic update: –æ–±–Ω–æ–≤–∏—Ç—å entities –≤ store
        ‚îÇ
        ‚ñº
entitiesApi.updateStatus(id, status)
        ‚îÇ
        ‚ñº
Backend: EntityService.updateStatus()
        ‚îÇ
        ‚îú‚îÄ‚îÄ –û–±–Ω–æ–≤–∏—Ç—å –≤ PostgreSQL
        ‚îÇ
        ‚ñº
EventsGateway.emitStatusChanged()
        ‚îÇ
        ‚ñº
WebSocket ‚Üí –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ
        ‚îÇ
        ‚ñº
useWebSocket –æ–±–Ω–æ–≤–ª—è–µ—Ç store (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ id)
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –≤ CommentEditor
        ‚îÇ
        ‚ñº
onSubmit(editor.getHTML())
        ‚îÇ
        ‚ñº
useEntityStore.addComment(entityId, content)
        ‚îÇ
        ‚ñº
commentsApi.create(entityId, {authorId, content})
        ‚îÇ
        ‚ñº
Backend: CommentService.create()
        ‚îÇ
        ‚îú‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PostgreSQL
        ‚îÇ
        ‚ñº
EventsGateway.emitCommentCreated(comment)
        ‚îÇ
        ‚ñº
WebSocket ‚Üí –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ
        ‚îÇ
        ‚ñº
useWebSocket –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ store
        ‚îÇ
        ‚ñº
Notification –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ useNotificationStore
```

### 3. Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
Backend —ç–º–∏—Ç–∏—Ç —Å–æ–±—ã—Ç–∏–µ (entity:created, comment:created, etc.)
        ‚îÇ
        ‚ñº
useWebSocket –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ
        ‚îÇ
        ‚îú‚îÄ‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç useEntityStore
        ‚îÇ
        ‚ñº
useNotificationStore.addNotification({text})
        ‚îÇ
        ‚ñº
ToastContainer –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç toast (auto-dismiss 4s)
        ‚îÇ
        ‚ñº
NotificationPanel –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ —Å–ø–∏—Å–∫–µ
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     sections      ‚îÇ  ‚óÑ‚îÄ‚îÄ –†–∞–∑–¥–µ–ª—ã (–≥—Ä—É–ø–ø—ã workspaces)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (uuid, PK)     ‚îÇ
‚îÇ name              ‚îÇ
‚îÇ description       ‚îÇ
‚îÇ icon              ‚îÇ  ‚óÑ‚îÄ‚îÄ –≠–º–æ–¥–∂–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é üìÅ)
‚îÇ order             ‚îÇ  ‚óÑ‚îÄ‚îÄ –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
‚îÇ createdAt         ‚îÇ
‚îÇ updatedAt         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤
         ‚îÇ sectionId
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ section_members   ‚îÇ       ‚îÇ     workspaces    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (uuid, PK)     ‚îÇ       ‚îÇ id (uuid, PK)     ‚îÇ
‚îÇ sectionId (FK)    ‚îÇ‚îÄ‚îÄ‚ñ∫    ‚îÇ name              ‚îÇ
‚îÇ userId (FK)       ‚îÇ‚îÄ‚îÄ‚ñ∫    ‚îÇ icon              ‚îÇ
‚îÇ role (enum)       ‚îÇ       ‚îÇ prefix            ‚îÇ  ‚óÑ‚îÄ‚îÄ –ü—Ä–µ—Ñ–∏–∫—Å –Ω–æ–º–µ—Ä–æ–≤ (TP, REK)
‚îÇ createdAt         ‚îÇ       ‚îÇ lastEntityNumber  ‚îÇ  ‚óÑ‚îÄ‚îÄ –°—á—ë—Ç—á–∏–∫ –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ sectionId (FK)    ‚îÇ‚îÄ‚îÄ‚ñ∫ sections.id (nullable)
UNIQUE(sectionId, userId)   ‚îÇ showInMenu        ‚îÇ  ‚óÑ‚îÄ‚îÄ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ –º–µ–Ω—é (default: true)
                            ‚îÇ orderInSection    ‚îÇ  ‚óÑ‚îÄ‚îÄ –ü–æ—Ä—è–¥–æ–∫ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–∞
                            ‚îÇ sections (jsonb)  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ createdAt         ‚îÇ                           ‚îÇ
                            ‚îÇ updatedAt         ‚îÇ                           ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
         ‚ñ≤                                      ‚îÇ
         ‚îÇ workspaceId                          ‚îÇ
         ‚îÇ                                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     entities      ‚îÇ         ‚îÇ      users        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (uuid, PK)     ‚îÇ         ‚îÇ id (uuid, PK)     ‚îÇ
‚îÇ customId          ‚îÇ         ‚îÇ email (unique)    ‚îÇ
‚îÇ workspaceId (FK)  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ password          ‚îÇ
‚îÇ title             ‚îÇ         ‚îÇ firstName         ‚îÇ
‚îÇ status            ‚îÇ         ‚îÇ lastName          ‚îÇ
‚îÇ priority          ‚îÇ         ‚îÇ avatar            ‚îÇ
‚îÇ assigneeId (FK)   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ department        ‚îÇ
‚îÇ data (jsonb)      ‚îÇ         ‚îÇ role (enum)       ‚îÇ
‚îÇ linkedEntityIds   ‚îÇ         ‚îÇ isActive          ‚îÇ
‚îÇ createdAt         ‚îÇ         ‚îÇ createdAt         ‚îÇ
‚îÇ updatedAt         ‚îÇ         ‚îÇ updatedAt         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤                              ‚ñ≤
         ‚îÇ entityId                     ‚îÇ authorId
         ‚îÇ                              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ     comments      ‚îÇ                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                   ‚îÇ
‚îÇ id (uuid, PK)     ‚îÇ                   ‚îÇ
‚îÇ entityId (FK)     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ authorId (FK)     ‚îÇ
‚îÇ content (text)    ‚îÇ
‚îÇ mentionedUserIds  ‚îÇ
‚îÇ attachments       ‚îÇ
‚îÇ createdAt         ‚îÇ
‚îÇ updatedAt         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ workspace_members ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (uuid, PK)     ‚îÇ
‚îÇ workspaceId (FK)  ‚îÇ‚îÄ‚îÄ‚ñ∫ workspaces.id
‚îÇ userId (FK)       ‚îÇ‚îÄ‚îÄ‚ñ∫ users.id
‚îÇ role (enum)       ‚îÇ  viewer | editor | admin
‚îÇ createdAt         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
UNIQUE(workspaceId, userId)

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  global_counters  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ name (PK)         ‚îÇ  'entity_number'
‚îÇ value (int)       ‚îÇ  –¢–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä (–≥–ª–æ–±–∞–ª—å–Ω—ã–π)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–Ω–¥–µ–∫—Å—ã

```sql
-- ====== ENTITIES ======
-- –ì–ª–æ–±–∞–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏
CREATE UNIQUE INDEX idx_entities_customid ON entities("customId");

-- –ö–∞–Ω–±–∞–Ω –¥–æ—Å–∫–∞ (—Ñ–∏–ª—å—Ç—Ä –ø–æ workspace + –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ status)
CREATE INDEX idx_entities_workspace_status ON entities("workspaceId", status);

-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –≤–Ω—É—Ç—Ä–∏ workspace
CREATE INDEX idx_entities_workspace_created ON entities("workspaceId", "createdAt" DESC);

-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
CREATE INDEX idx_entities_workspace_assignee ON entities("workspaceId", "assigneeId");

-- –§–∏–ª—å—Ç—Ä "–º–æ–∏ –∑–∞–¥–∞—á–∏" (partial index)
CREATE INDEX idx_entities_assignee ON entities("assigneeId") WHERE "assigneeId" IS NOT NULL;

-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
CREATE INDEX idx_entities_last_activity ON entities("workspaceId", "lastActivityAt" DESC NULLS LAST);

-- –ü–æ–∏—Å–∫ –ø–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –ø–æ–ª—è–º (GIN –¥–ª—è JSONB)
CREATE INDEX idx_entities_data_gin ON entities USING GIN (data jsonb_path_ops);

-- –ü–æ–∏—Å–∫ –ø–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º –∑–∞—è–≤–∫–∞–º
CREATE INDEX idx_entities_linked_gin ON entities USING GIN ("linkedEntityIds");

-- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
CREATE INDEX idx_entities_search ON entities USING GIN ("searchVector");

-- ====== COMMENTS ======
-- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ –∑–∞—è–≤–∫–µ
CREATE INDEX idx_comments_entity_created ON comments("entityId", "createdAt");

-- –§–∏–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É
CREATE INDEX idx_comments_author ON comments("authorId");

-- –ü–æ–∏—Å–∫ –ø–æ —É–ø–æ–º—è–Ω—É—Ç—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
CREATE INDEX idx_comments_mentions_gin ON comments USING GIN ("mentionedUserIds");

-- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
CREATE INDEX idx_comments_search ON comments USING GIN ("searchVector");

-- ====== AUDIT_LOGS ======
-- –ü–æ–∏—Å–∫ –ø–æ JSONB details
CREATE INDEX idx_audit_details_gin ON audit_logs USING GIN (details jsonb_path_ops);

-- B-tree –Ω–∞ description –≤–Ω—É—Ç—Ä–∏ JSONB
CREATE INDEX idx_audit_description ON audit_logs ((details->>'description'));
```

### –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (FTS)

PostgreSQL Full-Text Search —Å —Ä—É—Å—Å–∫–∏–º —è–∑—ã–∫–æ–º:

**–ü–æ–ª—è tsvector:**
- `entities.searchVector` ‚Äî title (–≤–µ—Å A), customId (A), status (B), priority (B), data (C)
- `comments.searchVector` ‚Äî content

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- `entities_search_vector_trigger` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ INSERT/UPDATE
- `comments_search_vector_trigger` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ INSERT/UPDATE

**API –ø–æ–∏—Å–∫–∞:**
```
GET /api/search?q=—Ç–µ–∫—Å—Ç&workspaceId=uuid&types=entity,comment&limit=50
GET /api/search/entities?q=—Ç–µ–∫—Å—Ç
GET /api/search/comments?q=—Ç–µ–∫—Å—Ç
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è

| –¢–∞–±–ª–∏—Ü–∞ | –ü–æ–ª–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
|---------|------|------------|------------|
| entities | commentCount | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ | –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ comments |
| entities | lastActivityAt | –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ entities/comments |
| entities | firstResponseAt | –í—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (SLA) | –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ comments |
| entities | resolvedAt | –ö–æ–≥–¥–∞ –∑–∞–∫—Ä—ã—Ç–∞ | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞ |

### Materialized Views

–î–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –±–µ–∑ GROUP BY –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö:

| View | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á |
|------|----------|------|
| mv_workspace_stats | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ workspace –∏ —Å—Ç–∞—Ç—É—Å–∞–º | (workspaceId, status) |
| mv_assignee_stats | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º | (workspaceId, assigneeId) |
| mv_daily_activity | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º | (workspaceId, activity_date) |

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```typescript
// –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ cron –∏–ª–∏ endpoint
await analyticsService.refreshMaterializedViews();
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π:** `apps/backend/src/migrations/`

| Timestamp | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| 1738600000000 | InitialSchema | Baseline —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º—ã |
| 1770126681086 | AddAnalyticsIndexes | B-tree –∏ GIN –∏–Ω–¥–µ–∫—Å—ã |
| 1770126700000 | AddFullTextSearch | tsvector, —Ç—Ä–∏–≥–≥–µ—Ä—ã, FTS –∏–Ω–¥–µ–∫—Å—ã |
| 1770126800000 | AddCachedFields | commentCount, lastActivityAt –∏ —Ç.–¥. |
| 1770126900000 | AddMaterializedViews | mv_workspace_stats –∏ –¥—Ä. |
| 1770300000000 | AddSections | –†–∞–∑–¥–µ–ª—ã, section_members, –ø–æ–ª—è workspaces |
| 1770500000000 | AddSlaAndDmnTables | SLA –∏ DMN —Ç–∞–±–ª–∏—Ü—ã (sla_definitions, sla_instances, sla_events, decision_tables, decision_evaluations) |
| 1770600000000 | FixSlaAndDmnTables | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã DMN —Ç–∞–±–ª–∏—Ü (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ target_type/target_id) |

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
npm run migration:generate -- src/migrations/Name  # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
npm run migration:run                              # –ü—Ä–∏–º–µ–Ω–∏—Ç—å
npm run migration:revert                           # –û—Ç–∫–∞—Ç–∏—Ç—å
npm run migration:show                             # –°—Ç–∞—Ç—É—Å
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)

**Backend (AuthModule):**
- JWT Access Token (15 –º–∏–Ω) + Refresh Token (7 –¥–Ω–µ–π, HttpOnly cookie)
- Passport.js —Å LocalStrategy –∏ JwtStrategy
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ bcrypt
- Guards: JwtAuthGuard, RolesGuard
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã: @Public(), @Roles(), @CurrentUser()

**Frontend:**
- AuthStore (Zustand) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- Axios interceptors –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–∫–µ–Ω–∞
- AuthProvider –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ 401

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| POST | /api/auth/login | –í—Ö–æ–¥ (email, password) |
| POST | /api/auth/refresh | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ |
| POST | /api/auth/logout | –í—ã—Ö–æ–¥ |
| GET | /api/auth/me | –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

**WebSocket –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ `socket.handshake.auth.token`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ handleConnection

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (RBAC)

**–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `admin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏–º–∏ –º–µ—Å—Ç–∞–º–∏, —Å—É—â–Ω–æ—Å—Ç—è–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| `manager` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç—è–º–∏: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ |
| `employee` | –ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø: –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ |

**Backend - –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ä–æ–ª–∏ |
|----------|------------------|
| `POST /api/workspaces` | admin |
| `PUT /api/workspaces/:id` | admin |
| `DELETE /api/workspaces/:id` | admin |
| `PUT /api/entities/:id` | admin, manager |
| `PATCH /api/entities/:id/assignee` | admin, manager |
| `DELETE /api/entities/:id` | admin, manager |
| `DELETE /api/entities/cleanup/test-data` | admin |
| `POST /api/users` | admin |
| `PUT /api/users/:id` | admin |
| `DELETE /api/users/:id` | admin |

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ Guards (AppModule):**
```typescript
// –ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω: —Å–Ω–∞—á–∞–ª–∞ JWT, –ø–æ—Ç–æ–º Roles
providers: [
  { provide: APP_GUARD, useClass: JwtAuthGuard },
  { provide: APP_GUARD, useClass: RolesGuard },
]
```

**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã:**
```typescript
@Public()                          // –û—Ç–∫—Ä—ã—Ç—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (–±–µ–∑ JWT)
@Roles(UserRole.ADMIN)             // –¢–æ–ª—å–∫–æ admin
@Roles(UserRole.ADMIN, UserRole.MANAGER)  // admin –∏–ª–∏ manager
```

**Frontend - —Å–∫—Ä—ã—Ç–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –≠–ª–µ–º–µ–Ω—Ç | –í–∏–¥–∏–º–æ—Å—Ç—å |
|-----------|---------|-----------|
| Sidebar | –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ" | —Ç–æ–ª—å–∫–æ admin |
| Sidebar | –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫/—É–¥–∞–ª–µ–Ω–∏—è workspace | —Ç–æ–ª—å–∫–æ admin |
| Sidebar | –†–∞–∑–¥–µ–ª "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ" | —Ç–æ–ª—å–∫–æ admin |
| KanbanBoard | –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" | —Ç–æ–ª—å–∫–æ admin |
| EntityDetailPanel | –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è | admin, manager |
| /admin/users | –í—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ | —Ç–æ–ª—å–∫–æ admin |

```typescript
// –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { user } = useAuthStore();
const isAdmin = user?.role === 'admin';
const canAssign = user?.role === 'admin' || user?.role === 'manager';
```

### RBAC –Ω–∞ —É—Ä–æ–≤–Ω–µ Workspace

–ü–æ–º–∏–º–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π, –µ—Å—Ç—å —Ä–æ–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ workspace:

**–†–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ workspace:**
| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `viewer` | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ |
| `editor` | –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ |
| `admin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ workspace, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ |

**–¢–∞–±–ª–∏—Ü–∞ `workspace_members`:**
```sql
workspace_id | user_id | role
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è workspaces:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π admin –≤–∏–¥–∏—Ç –≤—Å–µ workspace
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Ç–µ workspace, –≥–¥–µ –æ–Ω–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏:**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/workspaces/:id/members | –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ |
| GET | /api/workspaces/:id/my-role | –†–æ–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | /api/workspaces/:id/members | –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| PUT | /api/workspaces/:id/members/:userId | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å |
| DELETE | /api/workspaces/:id/members/:userId | –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å entities:**
| –û–ø–µ—Ä–∞—Ü–∏—è | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–æ–ª—å |
|----------|------------------|
| –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ entities | viewer |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π entity | viewer |
| –°–æ–∑–¥–∞–Ω–∏–µ entity | editor |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ entity | editor |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ | editor |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è | editor |
| –£–¥–∞–ª–µ–Ω–∏–µ entity | admin (workspace) |
| –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è | editor |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è | editor (–∞–≤—Ç–æ—Ä) |
| –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è | editor (–∞–≤—Ç–æ—Ä) |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —á—É–∂–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è | admin (workspace) |

**UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏:**
- –í–∫–ª–∞–¥–∫–∞ "–£—á–∞—Å—Ç–Ω–∏–∫–∏" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö workspace (—Ç–æ–ª—å–∫–æ –¥–ª—è global admin)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤—ã–±–æ—Ä–æ–º —Ä–æ–ª–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**UI –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è viewer:**
- –°–∫—Ä—ã—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞"
- –û—Ç–∫–ª—é—á–µ–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ (drag-and-drop)
- –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã
- –°–∫—Ä—ã—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –°–∫—Ä—ã—Ç—ã –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã
- `@Exclude()` –Ω–∞ password –≤ User entity
- `ClassSerializerInterceptor` –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª–µ–π
- `ValidationPipe` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å credentials: true

### API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Frontend ‚Üî Backend

**Development —Ä–µ–∂–∏–º:**
- Frontend (Next.js): `http://localhost:3000`
- Backend (NestJS): `http://localhost:3001`
- Next.js rewrites –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç `/api/*` –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ backend —á–µ—Ä–µ–∑ `next.config.ts`:
  ```typescript
  async rewrites() {
    return [{
      source: '/api/:path*',
      destination: 'http://localhost:3001/api/:path*'
    }];
  }
  ```
- –í –±—Ä–∞—É–∑–µ—Ä–µ apiClient –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `baseURL: '/api'` ‚Üí rewrites ‚Üí backend
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (SSR) apiClient –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `baseURL: 'http://localhost:3001'`
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É cookies (refresh token) - –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Ç–æ—Ç –∂–µ origin

**Production —Ä–µ–∂–∏–º:**
- Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api/*` –Ω–∞ backend
- Frontend –∏ backend —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ —á–µ—Ä–µ–∑ reverse proxy

### Keycloak SSO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º:** –¢–æ–ª—å–∫–æ Keycloak SSO (–ª–æ–∫–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞)

**Keycloak SSO:**
- OIDC Authorization Code Flow —Å PKCE
- Auto-provisioning –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Keycloak claims
- –ú–∞–ø–ø–∏–Ω–≥ —Ä–æ–ª–µ–π: realm-admin/admin ‚Üí admin, manager ‚Üí manager, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Üí employee
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ logout —á–µ—Ä–µ–∑ Keycloak
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç:** –ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –Ω–∞ `/login` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ Keycloak (–±–µ–∑ –∫–Ω–æ–ø–∫–∏)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Keycloak (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):**
1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å keycloak –≤ docker-compose.yml
2. –°–æ–∑–¥–∞–π—Ç–µ realm "stankoff" –≤ Keycloak Admin Console (http://localhost:8080)
3. –°–æ–∑–¥–∞–π—Ç–µ client "stankoff-portal" —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
   - Client authentication: On
   - Valid redirect URIs: http://localhost:3000/*
   - Web origins: http://localhost:3000
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client Secret –≤ .env (KEYCLOAK_CLIENT_SECRET)

**–í–Ω–µ—à–Ω–∏–π Keycloak (Preprod/Production):**
- URL: `https://new.stankoff.ru/oidc/`
- Realm –¥–ª—è preprod: `stankoff-preprod`
- Realm –¥–ª—è production: `stankoff` (TBD)
- Client ID: `stankoff-portal`

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- Realm `stankoff` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞** –∏ **–ù–ï –î–û–õ–ñ–ï–ù** –∏–∑–º–µ–Ω—è—Ç—å—Å—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- –î–ª—è preprod –æ–∫—Ä—É–∂–µ–Ω–∏—è **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å realm `stankoff-preprod`
- –î–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π realm (–Ω–µ `stankoff`!)

**–ö–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–º–∞ Keycloak:**

–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–º–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Ö–æ–¥–∞ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–º —Å—Ç–∏–ª–µ Stankoff Portal:

- **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `keycloak-theme/stankoff-portal/`
- **–î–∏–∑–∞–π–Ω:** –ë–∏—Ä—é–∑–æ–≤—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã (#06b6d4), –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ç–∏–ª—å, —à—Ä–∏—Ñ—Ç Inter
- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:** –†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –∫ realm `stankoff-preprod` (–Ω–µ –∫ `stankoff`!)
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** –°–º. `keycloak-theme/README.md`

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–º—ã:
```
keycloak-theme/stankoff-portal/login/
‚îú‚îÄ‚îÄ theme.properties                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ–º—ã
‚îú‚îÄ‚îÄ resources/css/login.css             # CSS —Å—Ç–∏–ª–∏
‚îî‚îÄ‚îÄ messages/messages_ru.properties     # –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–º—ã —Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `keycloak-theme/README.md`.

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã Keycloak:**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/auth/keycloak/login | –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Keycloak –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| GET | /api/auth/keycloak/callback | Callback –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Keycloak |
| POST | /api/auth/refresh | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token —á–µ—Ä–µ–∑ refresh token (cookie) |
| POST | /api/auth/logout | –í—ã—Ö–æ–¥ (–æ—á–∏—Å—Ç–∫–∞ cookies + Keycloak logout URL) |
| GET | /api/auth/me | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

**–ü–æ—Ç–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/login`
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/api/auth/keycloak/login`
3. Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç PKCE challenge –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ Keycloak
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –≤ Keycloak
5. Keycloak —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `/api/auth/keycloak/callback?code=...`
6. Backend –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç code –Ω–∞ tokens, —Å–æ–∑–¥–∞—ë—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
7. Backend —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç refresh token –≤ HttpOnly cookie
8. Backend —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `/dashboard?access_token=...`
9. AuthProvider:
   - –í–∏–¥–∏—Ç `access_token` –≤ URL –∏ –ù–ï —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ /login
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ –ø–∞–º—è—Ç–∏ (Zustand store)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —á–µ—Ä–µ–∑ `/api/auth/me`
   - –û—á–∏—â–∞–µ—Ç `access_token` –∏–∑ URL
10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∏ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ dashboard

**–ó–∞—â–∏—Ç–∞ –æ—Ç —Ü–∏–∫–ª–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤:**
- AuthProvider –Ω–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `/login`, –µ—Å–ª–∏ –≤ URL –µ—Å—Ç—å `access_token` (–¥–∞—ë—Ç –≤—Ä–µ–º—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É)
- Refresh token –≤ HttpOnly cookie –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access token

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- Rate limiting

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Development
```bash
npm run docker:up   # PostgreSQL + pgAdmin
npm run dev         # Frontend + Backend
```

### Production

**–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```
apps/backend/Dockerfile       # Multi-stage build, non-root user, healthcheck
apps/frontend/Dockerfile      # Standalone Next.js, non-root user, healthcheck
docker-compose.prod.yml       # Production compose
nginx/nginx.conf              # Reverse proxy configuration
scripts/backup.sh             # Database backup/restore script
.github/workflows/ci.yml      # CI/CD pipeline
```

**–ó–∞–ø—É—Å–∫:**
```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Å production –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.prod.yml up -d --build

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose -f docker-compose.prod.yml ps
curl http://localhost/api/health
```

**–°–µ—Ä–≤–∏—Å—ã docker-compose.prod.yml:**
| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| nginx | 80, 443 | Reverse proxy, SSL termination, rate limiting |
| frontend | 3000 (internal) | Next.js standalone |
| backend | 3001 (internal) | NestJS API |
| postgres | 5432 (internal) | PostgreSQL 16 |

**Nginx features:**
- Reverse proxy –¥–ª—è frontend –∏ backend
- WebSocket support –¥–ª—è Socket.IO
- Rate limiting (10 req/s –¥–ª—è API, 5 req/min –¥–ª—è login)
- Gzip compression
- Security headers (X-Frame-Options, X-Content-Type-Options, etc.)
- Static files caching –¥–ª—è Next.js
- SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)

**Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

–õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
./scripts/backup.sh backup              # –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø
./scripts/backup.sh list                # –°–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤
./scripts/backup.sh restore backup.sql.gz  # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
./scripts/backup.sh cleanup             # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
```

S3 –∫–æ–º–∞–Ω–¥—ã:
```bash
./scripts/backup.sh backup-s3           # –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ S3
./scripts/backup.sh list-s3             # –°–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤ –≤ S3
./scripts/backup.sh restore-s3          # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ S3 –±—ç–∫–∞–ø–∞
./scripts/backup.sh restore-s3 path/to/backup.sql.gz  # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π
./scripts/backup.sh cleanup-s3          # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ S3 –±—ç–∫–∞–ø—ã
./scripts/backup.sh scheduled           # –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: backup + S3 + cleanup
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (production):**

–°–µ—Ä–≤–∏—Å `backup` –≤ docker-compose.prod.yml:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –±—ç–∫–∞–ø—ã **—Ä–∞–∑ –≤ —á–∞—Å** (cron: `0 * * * *`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ S3 (Yandex Object Storage)
- –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (>7 –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –õ–æ–≥–∏: `docker logs stankoff-backup`

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| S3_BUCKET | –ò–º—è S3 –±–∞–∫–µ—Ç–∞ | (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| S3_BACKUP_PREFIX | –ü—É—Ç—å –≤ –±–∞–∫–µ—Ç–µ | backups/postgres |
| BACKUP_RETENTION_DAYS | –•—Ä–∞–Ω–∏—Ç—å –±—ç–∫–∞–ø—ã (–¥–Ω–µ–π) | 7 |

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è **bpms.stankoff.ru**.

**–ü–µ—Ä–≤–∏—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
./scripts/init-ssl.sh admin@stankoff.ru

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Let's Encrypt staging):
STAGING=1 ./scripts/init-ssl.sh admin@stankoff.ru
```

**–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ:**
| –°–µ—Ä–≤–∏—Å | –î–µ–π—Å—Ç–≤–∏–µ | –ò–Ω—Ç–µ—Ä–≤–∞–ª |
|--------|----------|----------|
| certbot | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ | –∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤ |
| nginx | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ | –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ |

**–§–∞–π–ª—ã:**
```
nginx/nginx.conf        # HTTPS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Let's Encrypt
nginx/nginx-init.conf   # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
scripts/init-ssl.sh     # –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–≤–∏—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```

**Docker volumes:**
- `certbot-conf` ‚Äî —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt (`/etc/letsencrypt`)
- `certbot-www` ‚Äî ACME challenge —Ñ–∞–π–ª—ã (`/var/www/certbot`)

**–†—É—á–Ω–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ:**
```bash
docker compose -f docker-compose.prod.yml run --rm certbot renew
docker compose -f docker-compose.prod.yml exec nginx nginx -s reload
```

### CI/CD Pipeline

GitHub Actions workflow (`.github/workflows/ci.yml`):

1. **Lint & Type Check** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞ –∏ —Ç–∏–ø–æ–≤
2. **Backend Tests** - Jest unit —Ç–µ—Å—Ç—ã —Å PostgreSQL
3. **Frontend Tests** - Vitest unit —Ç–µ—Å—Ç—ã
4. **E2E Tests** - Playwright —Ç–µ—Å—Ç—ã
5. **Build Docker Images** - —Å–±–æ—Ä–∫–∞ –∏ push –≤ GitHub Container Registry
6. **Deploy** - –¥–µ–ø–ª–æ–π –Ω–∞ production (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Health Checks

**HealthModule** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | /api/health | –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã |
| GET | /api/health/live | Liveness probe –¥–ª—è K8s |
| GET | /api/health/ready | Readiness probe (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î) |

**–û—Ç–≤–µ—Ç /api/health:**
```json
{
  "status": "ok",
  "timestamp": "2025-01-15T10:30:00Z",
  "uptime": 3600.5,
  "services": { "database": "healthy" },
  "memory": { "heapUsed": 120, "heapTotal": 256, "rss": 300 }
}
```

### Winston Logging

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Winston:

- **Development:** –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Å timestamp –≤ –∫–æ–Ω—Å–æ–ª—å
- **Production:** JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (ELK, Datadog)
- **–§–∞–π–ª—ã:** `logs/error.log` (—Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏), `logs/combined.log` (–≤—Å—ë)
- **–†–æ—Ç–∞—Ü–∏—è:** 10MB max, 5 —Ñ–∞–π–ª–æ–≤

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤:**
- `debug` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ (dev only)
- `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `warn` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `error` - –æ—à–∏–±–∫–∏ —Å stack trace

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ frontend/backend
- Prometheus –º–µ—Ç—Ä–∏–∫–∏
- Grafana dashboards

## Process Mining (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

### –û–ø–∏—Å–∞–Ω–∏–µ

Process Mining –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –±–∞–∑–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ ProcessInstance –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö ML-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

```
bpmn/process-mining/
‚îú‚îÄ‚îÄ process-mining.service.ts       # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ process-mining.controller.ts    # REST API endpoints
‚îî‚îÄ‚îÄ process-mining.service.spec.ts  # Unit —Ç–µ—Å—Ç—ã
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**ProcessStats (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞)**
```typescript
interface ProcessStats {
  definitionId: string;
  definitionName: string;
  totalInstances: number;       // –í—Å–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
  completedInstances: number;   // –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö
  activeInstances: number;      // –ê–∫—Ç–∏–≤–Ω—ã—Ö
  terminatedInstances: number;  // –û—Ç–º–µ–Ω—ë–Ω–Ω—ã—Ö
  completionRate: number;       // % –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (0-100)
  avgDurationMinutes: number | null;  // –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
}
```

**TimeAnalysis (–∞–Ω–∞–ª–∏–∑ –ø–æ –≤—Ä–µ–º–µ–Ω–∏)**
```typescript
interface TimeAnalysis {
  dayOfWeekStats: { day: number; count: number; avgDuration: number }[];  // 7 –¥–Ω–µ–π
  hourlyStats: { hour: number; count: number; avgDuration: number }[];    // 24 —á–∞—Å–∞
  trendLine: { date: string; count: number }[];  // –¢—Ä–µ–Ω–¥ –ø–æ –¥–Ω—è–º
}
```

**WorkspaceStats (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ workspace)**
```typescript
interface WorkspaceStats {
  totalDefinitions: number;       // –í—Å–µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  totalInstances: number;         // –í—Å–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
  statusDistribution: Record<ProcessInstanceStatus, number>;  // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
  avgCompletionRate: number;      // –°—Ä–µ–¥–Ω–∏–π % –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  topProcesses: { id: string; name: string; count: number }[];  // –¢–æ–ø-5 –ø–æ –∑–∞–ø—É—Å–∫–∞–º
}
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

- –í—ã—è–≤–ª–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- –ê–Ω–∞–ª–∏–∑ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (—á–∞—Å—ã, –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (completion rate)
- –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ

–ì–æ—Ç–æ–≤—ã–µ BPMN-—à–∞–±–ª–æ–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

```
bpmn/
‚îú‚îÄ‚îÄ bpmn-templates.service.ts       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏
‚îú‚îÄ‚îÄ bpmn-templates.controller.ts    # REST API
‚îú‚îÄ‚îÄ bpmn-templates.service.spec.ts  # Unit —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ templates/                      # BPMN XML —Ñ–∞–π–ª—ã —à–∞–±–ª–æ–Ω–æ–≤
    ‚îú‚îÄ‚îÄ simple-approval.bpmn
    ‚îú‚îÄ‚îÄ support-ticket.bpmn
    ‚îî‚îÄ‚îÄ ...
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | Label | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-------|----------|
| approval | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ | –ü—Ä–æ—Ü–µ—Å—Å—ã —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∑–∞—è–≤–æ–∫ |
| support | –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤, –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ |
| hr | HR | –û–Ω–±–æ—Ä–¥–∏–Ω–≥, –æ—Ç–ø—É—Å–∫–∞, —É–≤–æ–ª—å–Ω–µ–Ω–∏—è |
| finance | –§–∏–Ω–∞–Ω—Å—ã | –ü–ª–∞—Ç–µ–∂–∏, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤ |
| operations | –û–ø–µ—Ä–∞—Ü–∏–∏ | –ó–∞–∫—É–ø–∫–∏, –ª–æ–≥–∏—Å—Ç–∏–∫–∞ |
| it | IT | –ó–∞—è–≤–∫–∏ –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –¥–æ—Å—Ç—É–ø—ã |
| other | –ü—Ä–æ—á–µ–µ | –û—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã |

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∞

```typescript
interface BpmnTemplate {
  id: string;           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  name: string;         // –ù–∞–∑–≤–∞–Ω–∏–µ
  description: string;  // –û–ø–∏—Å–∞–Ω–∏–µ
  category: TemplateCategory;
  tags: string[];       // –¢–µ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
  difficulty: 'simple' | 'medium' | 'advanced';
  estimatedDuration: string;  // "1-2 —á–∞—Å–∞", "5-10 –º–∏–Ω" –∏ —Ç.–¥.
  bpmnXml?: string;     // BPMN XML (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞)
}
```

### API –ø–æ–∏—Å–∫–∞

–ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ:
- –ù–∞–∑–≤–∞–Ω–∏—é —à–∞–±–ª–æ–Ω–∞ (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ)
- –û–ø–∏—Å–∞–Ω–∏—é
- –¢–µ–≥–∞–º

## ML-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (Recommendations)

### –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö ML-—Å–µ—Ä–≤–∏—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–∫–æ—Ä–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

```
entity/recommendations/
‚îú‚îÄ‚îÄ recommendations.service.ts       # –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îú‚îÄ‚îÄ recommendations.controller.ts    # REST API
‚îî‚îÄ‚îÄ recommendations.service.spec.ts  # Unit —Ç–µ—Å—Ç—ã
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

**–ê–ª–≥–æ—Ä–∏—Ç–º —Å–∫–æ—Ä–∏–Ω–≥–∞:**
```typescript
score =
  workloadScore * 0.4 +           // –¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–º–µ–Ω—å—à–µ = –ª—É—á—à–µ)
  completionRateScore * 0.3 +     // –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
  responseTimeScore * 0.3         // –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

// –†–µ–∑—É–ª—å—Ç–∞—Ç
interface AssigneeRecommendation {
  userId: string;
  displayName: string;
  score: number;        // 0-100
  reason: string;       // "–ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, –≤—ã—Å–æ–∫–∏–π % –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è"
  currentWorkload: number;
  avgResponseTimeMinutes: number;
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:**
```typescript
const PRIORITY_KEYWORDS = {
  critical: ['—Å—Ä–æ—á–Ω–æ', '–∫—Ä–∏—Ç–∏—á–Ω–æ', '–∞–≤–∞—Ä–∏—è', 'urgent', 'asap', 'emergency'],
  high: ['–≤–∞–∂–Ω–æ', '–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç', '–±—ã—Å—Ç—Ä–æ', 'important', 'high'],
  medium: ['–æ–±—ã—á–Ω—ã–π', '—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π', 'normal'],
  low: ['–Ω–µ —Å—Ä–æ—á–Ω–æ', '–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—Ä–µ–º—è', 'low']
};

interface PriorityRecommendation {
  suggestedPriority: 'critical' | 'high' | 'medium' | 'low';
  confidence: number;     // 0-100
  matchedKeywords: string[];
}
```

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞

–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ—Ö–æ–∂–∏–º –∑–∞—è–≤–∫–∞–º
- –°—Ä–µ–¥–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –≤ workspace
- –¢–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–∞–Ω–¥—ã

```typescript
interface ResponseTimeEstimate {
  estimatedMinutes: number;
  confidenceLevel: 'high' | 'medium' | 'low';
  basedOnSamples: number;   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞—è–≤–æ–∫
}
```

### –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞—è–≤–æ–∫

**–ê–ª–≥–æ—Ä–∏—Ç–º Jaccard Similarity:**
```typescript
// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (–±–µ–∑ —Å—Ç–æ–ø-—Å–ª–æ–≤ RU/EN)
keywords = extractKeywords(title + ' ' + description);

// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞—è–≤–∫–∞–º–∏
similarity = |A ‚à© B| / |A ‚à™ B|  // Jaccard coefficient

interface SimilarEntity {
  entityId: string;
  title: string;
  similarity: number;  // 0-1
  resolution?: string; // –ö–∞–∫ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞
}
```

### –°—Ç–æ–ø-—Å–ª–æ–≤–∞

–°–µ—Ä–≤–∏—Å —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞:
- **–†—É—Å—Å–∫–∏–µ:** –∏, –≤, –Ω–∞, –Ω–µ, —á—Ç–æ, —ç—Ç–æ, –∫–∞–∫, –¥–ª—è, –ø–æ, –∏–∑, —Å, —Ç–æ, –∞, –æ, –æ—Ç...
- **–ê–Ω–≥–ª–∏–π—Å–∫–∏–µ:** the, a, an, and, or, but, in, on, at, to, for, of, is, it...

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- Frontend: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞, CDN
- Backend: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∑–∞ load balancer
- WebSocket: Redis adapter –¥–ª—è Socket.IO
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: Read replicas

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redis –¥–ª—è —Å–µ—Å—Å–∏–π –∏ –∫—ç—à–∞
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- Browser caching –¥–ª—è API responses
