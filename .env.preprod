# =============================================
# Stankoff Portal - Preprod Environment
# =============================================
# Этот файл копируется на сервер в /opt/stankoff-portal/.env

# ===========================================
# DATABASE
# ===========================================
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=stankoff_preprod
DATABASE_USER=postgres
DATABASE_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ===========================================
# BACKEND
# ===========================================
NODE_ENV=production
FRONTEND_URL=https://preprod.stankoff.ru

# JWT секреты (обязательно сгенерируйте уникальные!)
# openssl rand -hex 32
JWT_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL
JWT_EXPIRES_IN=15m

# ===========================================
# FRONTEND
# ===========================================
NEXT_PUBLIC_API_URL=https://preprod.stankoff.ru/api
NEXT_PUBLIC_WS_URL=wss://preprod.stankoff.ru
NEXT_PUBLIC_KEYCLOAK_URL=https://new.stankoff.ru/oidc
NEXT_PUBLIC_KEYCLOAK_REALM=stankoff-preprod
NEXT_PUBLIC_KEYCLOAK_CLIENT_ID=stankoff-portal

# ===========================================
# S3 / YANDEX OBJECT STORAGE
# ===========================================
S3_ENDPOINT=https://storage.yandexcloud.net
S3_REGION=ru-central1
S3_BUCKET=stankoff-preprod
S3_ACCESS_KEY=YOUR_YANDEX_S3_ACCESS_KEY
S3_SECRET_KEY=YOUR_YANDEX_S3_SECRET_KEY

# Алиасы для совместимости
S3_ACCESS_KEY_ID=${S3_ACCESS_KEY}
S3_SECRET_ACCESS_KEY=${S3_SECRET_KEY}
S3_BUCKET_NAME=${S3_BUCKET}

# ===========================================
# EMAIL (SMTP)
# ===========================================
SMTP_ENABLED=false
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=587
SMTP_USER=noreply@stankoff.ru
SMTP_PASS=YOUR_SMTP_PASSWORD
SMTP_FROM=noreply@stankoff.ru
SMTP_FROM_EMAIL=${SMTP_FROM}
SMTP_FROM_NAME=Stankoff Portal (Preprod)

# ===========================================
# AUTHENTICATION (Keycloak SSO)
# ===========================================
AUTH_PROVIDER=keycloak
KEYCLOAK_ENABLED=true
KEYCLOAK_URL=https://new.stankoff.ru/oidc
KEYCLOAK_REALM=stankoff-preprod
KEYCLOAK_CLIENT_ID=stankoff-portal
KEYCLOAK_CLIENT_SECRET=YOUR_KEYCLOAK_CLIENT_SECRET
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_ADMIN_PASSWORD

# ===========================================
# BACKUP (Production)
# ===========================================
S3_BACKUP_PREFIX=backups/preprod
BACKUP_RETENTION_DAYS=7

# ===========================================
# SSL / DOMAIN
# ===========================================
DOMAIN=preprod.stankoff.ru
CERTBOT_EMAIL=admin@stankoff.ru

# ===========================================
# LEGACY DATABASE (MariaDB/MySQL - Read-Only)
# ===========================================
LEGACY_DB_HOST=185.186.143.38
LEGACY_DB_PORT=3306
LEGACY_DB_USER=dev
LEGACY_DB_PASSWORD=rV7vO5rP2b
LEGACY_DB_NAME=stankoff

# ===========================================
# AI Configuration
# ===========================================
AI_ENABLED=true
OPENAI_API_KEY=YOUR_OPENAI_API_KEY
OPENAI_MODEL=gpt-4o
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
